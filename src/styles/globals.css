:root {
  /* Dark theme defaults (high contrast, softer bg) */
  --bg: #0e1220;           /* deep navy */
  /* Decorative background gradient for glass look */
  --bg-gradient:
    radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.25), transparent 60%),
    radial-gradient(1000px 600px at 110% 10%, rgba(16,185,129,.15), transparent 50%),
    radial-gradient(800px 500px at 50% 120%, rgba(14,165,233,.12), transparent 50%);
  --panel: #12172a;        /* elevated surface */
  --text: #eef2ff;         /* indigo-50 */
  --muted: #94a3b8;        /* slate-400 */
  --border: #1f2b44;       /* navy-700 */
  --accent: #6366f1;       /* indigo-500 */
  --accent-600: #4f46e5;   /* indigo-600 */
  /* Accent glass variants (dark) */
  --accent-glass: rgba(99,102,241,.22);
  --accent-glass-border: rgba(99,102,241,.35);
  --shadow-1: 0 4px 10px rgba(0,0,0,.25);
  --shadow-2: 0 10px 24px rgba(0,0,0,.28);
  --panel-raise: rgba(255,255,255,.05);
  --border-strong: #2a3a5e;

  /* Glass tokens (dark) */
  --glass-bg: rgba(255,255,255,.06);
  --glass-border: rgba(255,255,255,.12);
  --glass-blur: saturate(140%) blur(14px);
  color-scheme: dark;
}

[data-theme="light"] {
  --bg: #f6f8ff;          /* subtle indigo-tinted white */
  --bg-gradient:
    radial-gradient(1200px 600px at -10% 0%, rgba(99,102,241,.20), transparent 60%),
    radial-gradient(900px 600px at 110% 0%, rgba(16,185,129,.18), transparent 55%),
    radial-gradient(700px 500px at 50% 120%, rgba(14,165,233,.16), transparent 55%);
  --panel: #ffffff;        /* pure surface */
  --text: #0f172a;         /* slate-900 */
  --muted: #64748b;        /* slate-500 */
  --border: #e5e7eb;       /* gray-200 */
  --accent: #4f46e5;       /* indigo-600 */
  --accent-600: #4338ca;   /* indigo-700 */
  /* Accent glass variants (light) */
  --accent-glass: rgba(79,70,229,.18);
  --accent-glass-border: rgba(79,70,229,.30);
  --shadow-1: 0 6px 14px rgba(15,23,42,.08);
  --shadow-2: 0 14px 28px rgba(15,23,42,.10);
  --panel-raise: rgba(15,23,42,.06);
  --border-strong: #cbd5e1;

  /* Glass tokens (light) */
  --glass-bg: rgba(255,255,255,.60);
  --glass-border: rgba(148,163,184,.35);
  --glass-blur: saturate(160%) blur(16px);
  color-scheme: light;
}

html, body, #__next { height: 100%; }
body {
  margin: 0;
  background-color: var(--bg);
  background-image: var(--bg-gradient);
  background-attachment: fixed;
  background-size: cover;
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}
*, *::before, *::after { box-sizing: border-box; }
* { transition: background-color .2s ease, color .2s ease, border-color .2s ease; }

.app { min-height: 100vh; display: flex; flex-direction: column; }

.toolbar {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
  padding: 12px 16px;
  border-bottom: 1px solid var(--glass-border);
  background: var(--glass-bg);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
}
.toolbar .spacer { flex: 1; }
.toolbar .search {
  flex: 1;
  max-width: 520px;
  padding: 10px 12px;
  border: 1px solid var(--glass-border);
  background: rgba(255,255,255,.04);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  color: var(--text);
  border-radius: 8px;
}
.toolbar .control { display: inline-flex; align-items: center; gap: 8px; font-size: 14px; color: var(--muted); }
.toolbar select, .toolbar input[type="range"] { background: rgba(255,255,255,.04); color: var(--text); border: 1px solid var(--glass-border); border-radius: 6px; padding: 6px 8px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.toolbar .primary-btn { background: var(--accent); color: white; border: none; padding: 8px 10px; border-radius: 8px; cursor: pointer; box-shadow: var(--shadow-1); }
.toolbar .primary-btn:hover { background: var(--accent-600); transform: translateY(-1px); }
.toolbar .primary-btn:active { transform: translateY(0); }
.toolbar .secondary-btn { background: var(--panel-raise); color: var(--text); border: 1px solid var(--glass-border); padding: 8px 10px; border-radius: 8px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.toolbar .secondary-btn:hover { filter: brightness(1.05); }

/* Generic icon button */
.btn { display: inline-flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 8px; cursor: pointer; border: 1px solid var(--glass-border); background: var(--panel-raise); color: var(--text); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.btn-on { background: var(--accent); color: white; border-color: transparent; box-shadow: var(--shadow-1); }
.btn-on:hover { background: var(--accent-600); }
.btn-off:hover { filter: brightness(1.05); }

.icon-btn { width: 30px; height: 30px; display: grid; place-items: center; border-radius: 8px; border: 1px solid var(--glass-border); background: var(--panel-raise); color: var(--text); box-shadow: inset 0 -1px 0 rgba(0,0,0,.08); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.icon-btn:hover { filter: brightness(1.05); }
.icon-btn:active { transform: translateY(1px); }
.fav-btn.is-on { background: #fde047; color: #1a1a1a; border-color: #facc15; }

/* Range styling (Chromium/WebKit) */
.toolbar input[type="range"] { appearance: none; height: 6px; padding: 0; border-radius: 999px; border-color: transparent; background: linear-gradient(var(--accent), var(--accent)) 0/var(--range-pct, 0%) 100% no-repeat, var(--border); }
.toolbar input[type="range"]::-webkit-slider-runnable-track { height: 6px; background: transparent; }
.toolbar input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: var(--accent); border: 2px solid white; margin-top: -5px; }
.toolbar input[type="range"]::-moz-range-track { height: 6px; background: var(--border); border: none; }
.toolbar input[type="range"]::-moz-range-progress { background: var(--accent); height: 6px; }
.toolbar input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: var(--accent); border: 2px solid white; }

/* Radix Select styles */
.select-trigger { display: inline-flex; align-items: center; gap: 8px; background: var(--panel-raise); color: var(--text); border: 1px solid var(--glass-border); border-radius: 8px; padding: 6px 10px; cursor: pointer; min-width: 120px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.select-trigger:hover { filter: brightness(1.05); }
.select-trigger:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
.select-icon { opacity: .7; }
.select-content { background: var(--glass-bg); color: var(--text); border: 1px solid var(--glass-border); border-radius: 10px; box-shadow: var(--shadow-2); overflow: hidden; z-index: 1000; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.select-viewport { padding: 6px; }
.select-item { padding: 8px 10px; border-radius: 6px; cursor: pointer; border: 1px solid transparent; }
.select-item[aria-selected="true"], .select-item:hover { background: var(--accent-glass); color: var(--text); border-color: var(--accent-600); }
.select-item:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.container { width: min(1200px, 92%); margin: 20px auto; }
.page-header { display: flex; align-items: center; margin: 8px 0 16px; }
.title-input { font-size: 28px; font-weight: 700; border: none; background: transparent; color: var(--text); width: 100%; }
.title-input:focus { outline: none; }
.title-display { font-size: 32px; font-weight: 800; margin: 0; }

.groups { display: grid; gap: 16px; }
.group { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: 10px; display: flex; flex-direction: column; gap: 8px; overflow: hidden; box-shadow: var(--shadow-1); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.group-header { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 8px; }
.group-title { width: 100%; min-width: 0; font-size: 16px; background: transparent; border: 1px solid var(--glass-border); color: var(--text); border-radius: 8px; padding: 6px 8px; }
.group-title-static { font-weight: 600; padding: 8px 10px; border: 1px solid var(--glass-border); border-radius: 8px; background: transparent; }
.group-actions { display: inline-flex; flex-shrink: 0; gap: 6px; opacity: .9; transition: opacity .15s ease; white-space: nowrap; }
.group:hover .group-actions, .group:focus-within .group-actions { opacity: 1; }
.group-actions button { padding: 0; }
.group-actions .icon-btn { margin-left: 2px; }

.tiles { display: grid; gap: 10px; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
.tiles-compact { gap: 6px; }
.tile-all { display: grid; gap: 6px; }
.tile-chip { font-size: 11px; color: var(--muted); justify-self: end; }

.tile { display: grid; gap: 6px; border: 1px solid var(--glass-border); border-left: 4px solid var(--accent); border-radius: 12px; padding: 10px; background: var(--glass-bg); overflow: visible; box-shadow: var(--shadow-1); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.tile-main { display: grid; grid-template-columns: 40px 1fr auto; gap: 10px; text-decoration: none; color: inherit; }
.tile-icon { width: 40px; height: 40px; display: grid; place-items: center; border-radius: 8px; background: rgba(255,255,255,.08); overflow: hidden; outline: none; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.tile-icon img { width: 24px; height: 24px; }
.tile-text { display: grid; gap: 4px; }
.tile-text input, .tile-text select { min-width: 0; }
.tile-right { display: flex; align-items: flex-start; gap: 6px; }
.drag-handle { width: 28px; height: 28px; display: grid; place-items: center; border-radius: 8px; border: 1px dashed var(--border-strong); color: var(--muted); cursor: grab; }
.drag-handle:active { cursor: grabbing; }
.tile-badges { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 4px; }
.badge { font-size: 10px; color: white; background: var(--accent); padding: 2px 6px; border-radius: 999px; }
.badge-env { background: #0ea5e9; }
.badge-critical { background: #ef4444; }
.badge-high { background: #f59e0b; }
.badge-medium { background: #22c55e; }
.badge-low { background: #64748b; }
.tile-meta { display: grid; grid-template-columns: 1fr; gap: 8px; }
.tile-meta input, .tile-meta select { width: 100%; min-width: 0; }
.field { display: grid; gap: 4px; }
.field-label { font-size: 11px; color: var(--muted); }
.tile-link { text-decoration: none; color: inherit; display: grid; gap: 4px; }
.tile-title-static { font-weight: 700; }
.tile-url-static { font-size: 12px; color: var(--muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.tile-title, .tile-url, .tile-desc { width: 100%; background: transparent; color: var(--text); border: 1px solid var(--glass-border); border-radius: 6px; padding: 6px 8px; }
.tile-title:focus-visible, .tile-url:focus-visible, .tile-desc:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-color: var(--accent); }
.tile-title { font-weight: 600; }
.tile-url { font-size: 12px; color: var(--muted); }
.tile-actions { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; opacity: 1; }
.tile-actions input[type="color"] { width: 40px; height: 30px; padding: 0; background: var(--panel-raise); border: 1px solid var(--glass-border); border-radius: 8px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.tile-actions button { padding: 0; }
.tile-icon-input { flex: 1; min-width: 180px; background: transparent; color: var(--text); border: 1px solid var(--glass-border); border-radius: 6px; padding: 6px 8px; }

/* Style native selects inside tiles to match theme */
.tile-text select, .tile-meta select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: var(--panel-raise);
  color: var(--text);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 6px 8px;
  color-scheme: inherit;
  cursor: pointer;
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
}
/* Wide inputs in meta so they don’t overflow */
.tile-text input, .tile-meta input { background: transparent; color: var(--text); border: 1px solid var(--glass-border); border-radius: 6px; padding: 6px 8px; }

/* Chips input */
.chips-wrap { position: relative; display: grid; gap: 6px; }
.chips { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; min-height: 34px; padding: 4px 6px; border: 1px solid var(--glass-border); border-radius: 8px; background: var(--panel-raise); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.chip { display: inline-flex; align-items: center; gap: 6px; background: var(--accent-glass); color: var(--text); border: 1px solid var(--glass-border); padding: 3px 8px; border-radius: 999px; font-size: 12px; }
.chip-x { background: transparent; color: inherit; border: none; padding: 0; cursor: pointer; opacity: .8; }
.chip-x:hover { opacity: 1; }
.chip-input { flex: 1; min-width: 80px; border: none; background: transparent; color: var(--text); outline: none; padding: 4px 6px; }
.chips-popover { position: absolute; left: 0; right: 0; top: calc(100% + 6px); background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 10px; padding: 4px; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); max-height: 220px; overflow: auto; z-index: 3000; }
.chips-popover.is-up { top: auto; bottom: calc(100% + 6px); }
.chip-option { display: block; width: 100%; text-align: left; background: transparent; color: var(--text); border: 1px solid transparent; border-radius: 8px; padding: 8px 10px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.chip-option:hover { background: var(--panel-raise); border-color: var(--glass-border); }
.chip-option.is-active { background: var(--accent-glass); color: var(--text); border-color: var(--accent-600); box-shadow: 0 2px 0 rgba(0,0,0,.12); }
.chip-option:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.add-group, .add-tile { border: 1px dashed var(--glass-border); background: var(--panel-raise); color: var(--text); padding: 12px; border-radius: 10px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.add-group { height: 48px; grid-column: 1 / -1; }

/* Status indicator */
.status { width: 10px; height: 10px; border-radius: 50%; align-self: start; margin-left: auto; margin-top: 2px; box-shadow: 0 0 0 2px rgba(0,0,0,.2) inset; }
.status.ok { background: #10b981; }
.status.bad { background: #ef4444; }
.status.unk { background: #9ca3af; }

/* List view */
.list-view { display: grid; gap: 8px; }
.list-header, .list-row { display: grid; grid-template-columns: 2fr 2fr 1fr auto; gap: 8px; align-items: center; }
.list-header { font-weight: 700; color: var(--muted); padding: 6px 4px; }
.list-row { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 8px; padding: 8px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.list-row a { color: var(--accent); text-decoration: none; }
.list-row > div { min-width: 0; }
.list-row input {
  width: 100%;
  background: transparent;
  color: var(--text);
  border: 1px solid var(--glass-border);
  border-radius: 6px;
  padding: 6px 8px;
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
}

/* Status dot for list view */
.status-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 6px; box-shadow: 0 0 0 2px rgba(0,0,0,.2) inset; }
.status-online { background: #10b981; }
.status-offline { background: #ef4444; }
.status-unknown { background: #9ca3af; }

@media (max-width: 640px) {
  .container { width: 94%; }
}

/* Embedded toolbar and header layout overrides */
.page-header { display: grid; gap: 8px; grid-template-columns: 1fr; }
@media (min-width: 900px) {
  .page-header { grid-template-columns: 1fr auto; align-items: center; }
}
.page-header .toolbar { border-bottom: 0; border: 1px solid var(--glass-border); border-radius: 12px; padding: 8px 10px; gap: 10px; }

/* Native options in selects (where supported) */
.tile-text select option, .tile-meta select option { background: var(--panel); color: var(--text); }

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

/* Visually hidden utility for accessible labels */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap; border: 0;
}

/* Toast (snackbar) */
.toast-wrap { position: fixed; right: 16px; bottom: 16px; display: grid; gap: 8px; z-index: 2000; }
.toast { background: var(--glass-bg); color: var(--text); border: 1px solid var(--glass-border); border-radius: 10px; padding: 10px 12px; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
/* Prevent controls from overlapping in group headers */
.group-header { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.group-actions { display: inline-flex; align-items: center; gap: 6px; flex-wrap: wrap; }
