@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Dark theme defaults (high contrast, softer bg) */
  --bg: #0b1020;           /* deep navy */
  /* Decorative background gradient for glass look */
  --bg-gradient:
    radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.25), transparent 60%),
    radial-gradient(1000px 600px at 110% 10%, rgba(16,185,129,.15), transparent 50%),
    radial-gradient(800px 500px at 50% 120%, rgba(14,165,233,.12), transparent 50%);
  --panel: #12182c;        /* elevated surface */
  --panel-elevated: rgba(24, 32, 56, 0.9);
  --panel-muted: rgba(24, 32, 56, 0.68);
  --text: #eef2ff;         /* indigo-50 */
  --muted: #94a3b8;        /* slate-400 */
  --muted-strong: #cbd5f5;
  --border: #1f2b44;       /* navy-700 */
  --accent: #6366f1;       /* indigo-500 */
  --accent-600: #4f46e5;   /* indigo-600 */
  --accent-soft: rgba(99,102,241,.14);
  --success: #22c55e;
  --warning: #f59e0b;
  --danger: #ef4444;
  /* Accent glass variants (dark) */
  --accent-glass: rgba(99,102,241,.22);
  --accent-glass-border: rgba(99,102,241,.35);
  --shadow-1: 0 4px 16px rgba(3,8,22,.28);
  --shadow-2: 0 18px 40px rgba(2,6,23,.4);
  --shadow-3: 0 32px 60px rgba(2,6,23,.55);
  --panel-raise: rgba(255,255,255,.04);
  --border-strong: #2a3a5e;

  --radius-lg: 24px;
  --radius-md: 14px;
  --radius-sm: 10px;

  --font-sans: "Inter", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

  /* Glass tokens (dark) */
  --glass-bg: rgba(10,16,32,.65);
  --glass-border: rgba(99,102,241,.22);
  --glass-blur: saturate(160%) blur(16px);
  color-scheme: dark;
}

[data-theme="light"] {
  --bg: #f6f8ff;          /* subtle indigo-tinted white */
  --bg-gradient:
    radial-gradient(1200px 600px at -10% 0%, rgba(99,102,241,.16), transparent 60%),
    radial-gradient(900px 600px at 110% 0%, rgba(16,185,129,.18), transparent 55%),
    radial-gradient(700px 500px at 50% 120%, rgba(14,165,233,.14), transparent 55%);
  --panel: rgba(255,255,255,.92);        /* pure surface */
  --panel-elevated: #ffffff;
  --panel-muted: rgba(255,255,255,.72);
  --text: #0f172a;         /* slate-900 */
  --muted: #64748b;        /* slate-500 */
  --muted-strong: #1f2937;
  --border: #e5e7eb;       /* gray-200 */
  --accent: #4f46e5;       /* indigo-600 */
  --accent-600: #4338ca;   /* indigo-700 */
  --accent-soft: rgba(79,70,229,.12);
  --success: #0f9d58;
  --warning: #d97706;
  --danger: #dc2626;
  /* Accent glass variants (light) */
  --accent-glass: rgba(79,70,229,.18);
  --accent-glass-border: rgba(79,70,229,.30);
  --shadow-1: 0 10px 26px rgba(15,23,42,.14);
  --shadow-2: 0 28px 50px rgba(15,23,42,.18);
  --shadow-3: 0 48px 80px rgba(15,23,42,.24);
  --panel-raise: rgba(15,23,42,.04);
  --border-strong: #cbd5e1;

  /* Glass tokens (light) */
  --glass-bg: rgba(255,255,255,.75);
  --glass-border: rgba(148,163,184,.35);
  --glass-blur: saturate(160%) blur(16px);
  color-scheme: light;
}

html, body, #__next { min-height: 100%; }
body {
  margin: 0;
  min-height: 100%;
  background-color: var(--bg);
  background-image: var(--bg-gradient);
  background-attachment: fixed;
  background-size: cover;
  color: var(--text);
  font-family: var(--font-sans);
  line-height: 1.65;
  letter-spacing: -.01em;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  padding: 32px 0 48px;
}
h1, h2, h3 { margin: 0; font-weight: 700; color: var(--text); letter-spacing: -.01em; }
h1 { font-size: clamp(30px, 4vw, 42px); }
h2 { font-size: clamp(22px, 3vw, 30px); font-weight: 650; }
h3 { font-size: clamp(18px, 2.4vw, 24px); font-weight: 600; }
p { margin: 0; line-height: 1.65; }
*, *::before, *::after { box-sizing: border-box; }
* { transition: background-color .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease; }
button:disabled { opacity: .55; cursor: not-allowed; filter: grayscale(.2); pointer-events: none; }

.app {
  min-height: calc(100vh - 80px);
  display: flex;
  flex-direction: column;
  gap: 24px;
  position: relative;
}

.toolbar {
  display: flex;
  gap: 18px;
  align-items: center;
  flex-wrap: wrap;
  padding: 18px 22px;
  border: 1px solid rgba(148,163,184,.18);
  background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated));
  border-radius: var(--radius-md);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  box-shadow: var(--shadow-1);
}
.toolbar { transition: box-shadow .2s ease, background-color .2s ease, transform .16s ease; }
.toolbar:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); }
.toolbar .label-text { font-weight: 600; }
.toolbar .spacer { flex: 1; }
.toolbar .search {
  flex: 1;
  min-width: clamp(200px, 40vw, 360px);
  padding: 12px 16px;
  border: 1px solid rgba(148,163,184,.25);
  background: rgba(6, 12, 28, 0.4);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  color: var(--text);
  border-radius: 14px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 28px rgba(99,102,241,.1);
  font-size: 15px;
}
.toolbar-modern { display: grid; gap: 16px; width: 100%; }
.toolbar-grid { display: grid; gap: 16px; width: 100%; }
.toolbar-row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; width: 100%; }
.toolbar-row-main { justify-content: space-between; }
.toolbar-edit { min-width: 130px; text-align: center; }
.toolbar-edit.is-active { box-shadow: var(--shadow-1); }
.toolbar-row-profile { align-items: stretch; }
.toolbar-section { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.actions-section { flex: 0 0 auto; display: flex; align-items: center; justify-content: flex-end; position: relative; }
.toolbar-action-toggle { padding: 10px 20px; border-radius: 999px; border: 1px solid rgba(148,163,184,.24); background: rgba(255,255,255,.08); color: var(--text); font-weight: 600; cursor: pointer; transition: transform .12s ease, box-shadow .18s ease, border-color .12s ease, background .18s ease; }
.toolbar-action-toggle:hover, .toolbar-action-toggle:focus-visible { transform: translateY(-1px); border-color: var(--accent-600); box-shadow: 0 10px 22px rgba(99,102,241,.32); background: rgba(99,102,241,.18); outline: none; }
.toolbar-action-toggle.is-open { border-color: var(--accent-600); box-shadow: 0 12px 24px rgba(99,102,241,.35); background: rgba(99,102,241,.22); }
.toolbar-action-menu { position: absolute; right: 0; top: calc(100% + 8px); min-width: 220px; background: linear-gradient(160deg, rgba(14,20,38,.92), rgba(26,32,56,.96)); border: 1px solid rgba(148,163,184,.26); border-radius: 16px; box-shadow: 0 18px 36px rgba(2,8,20,.45); padding: 10px; display: grid; gap: 6px; z-index: 400; }
.action-menu-item { display: inline-flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; border: 1px solid transparent; background: transparent; color: var(--text); text-align: left; cursor: pointer; font-size: 13px; font-weight: 500; transition: transform .12s ease, box-shadow .18s ease, border-color .12s ease, background .18s ease; }
.action-menu-item span:first-of-type { font-size: 14px; opacity: .85; }
.action-menu-item:hover, .action-menu-item:focus-visible { background: rgba(99,102,241,.18); border-color: rgba(99,102,241,.35); transform: translateY(-1px); outline: none; }
.action-menu-item:disabled { opacity: .5; cursor: not-allowed; transform: none; border-color: transparent; background: transparent; }
.action-menu-item.danger { color: #fecaca; }
.action-menu-item.danger:hover, .action-menu-item.danger:focus-visible { background: rgba(239,68,68,.18); border-color: rgba(239,68,68,.4); }
.toolbar-row-edit { align-items: center; gap: 14px; flex-wrap: wrap; border-top: 1px solid rgba(148,163,184,.16); padding-top: 10px; }
.slider-control input { max-width: 180px; }
.select-control { min-width: 160px; }
.toggle-control { display: inline-flex; align-items: center; gap: 8px; }
.profile-new { align-items: center; gap: 12px; flex-wrap: wrap; }
.profile-new .tile-icon-input { flex: 1 1 260px; min-width: 200px; }
.profile-new-actions { display: inline-flex; gap: 10px; flex-wrap: wrap; }
.toolbar-row-advanced { align-items: center; gap: 12px; flex-wrap: wrap; }
.toolbar .control { display: inline-flex; align-items: center; gap: 8px; font-size: 14px; color: var(--muted); }
.toolbar select, .toolbar input[type="range"] { background: rgba(255,255,255,.04); color: var(--text); border: 1px solid rgba(148,163,184,.25); border-radius: 10px; padding: 8px 10px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.toolbar .primary-btn { background: var(--accent); color: white; border: none; padding: 10px 18px; border-radius: 14px; cursor: pointer; box-shadow: var(--shadow-1); font-weight: 600; letter-spacing: -.01em; }
.toolbar .primary-btn { transition: transform .12s ease, box-shadow .2s ease, filter .12s ease; }
.toolbar .primary-btn:hover, .toolbar .primary-btn:focus-visible { background: var(--accent-600); transform: translateY(-1px); box-shadow: 0 12px 24px rgba(99,102,241,.45); outline: none; }
.toolbar .primary-btn:active { transform: translateY(0); filter: brightness(.96); }
.toolbar .secondary-btn { background: rgba(255,255,255,.04); color: var(--text); border: 1px solid rgba(148,163,184,.22); padding: 9px 16px; border-radius: 12px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); font-weight: 500; }
.toolbar .secondary-btn { transition: transform .12s ease, box-shadow .2s ease, filter .12s ease, border-color .12s ease; }
.toolbar .secondary-btn:hover, .toolbar .secondary-btn:focus-visible { filter: brightness(1.05); border-color: var(--accent-600); box-shadow: 0 8px 18px rgba(15,23,42,.28); outline: none; }
.toolbar .more-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; border-radius: 12px; border: 1px solid rgba(148,163,184,.24); background: rgba(255,255,255,.06); color: var(--text); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); box-shadow: 0 4px 12px rgba(0,0,0,.2), inset 0 -1px 0 rgba(0,0,0,.14); margin-left: 0; transition: transform .16s ease, filter .12s ease, box-shadow .2s ease, border-color .12s ease; }
.toolbar .more-btn:hover, .toolbar .more-btn:focus-visible { filter: saturate(115%); transform: translateY(-1px); border-color: var(--accent-600); box-shadow: 0 12px 24px rgba(99,102,241,.35), inset 0 -1px 0 rgba(0,0,0,.12); outline: none; }
.toolbar .more-btn:active { transform: translateY(0); }
.toolbar .more-btn[aria-expanded="true"] { border-color: var(--accent-600); box-shadow: 0 12px 24px rgba(99,102,241,.35), inset 0 -1px 0 rgba(0,0,0,.12); }
/* Advanced strip: animate open/close */
.toolbar-advanced { display: block; overflow: hidden; max-height: 0; opacity: 0; transform: translateY(-4px); pointer-events: none; transition: max-height .22s ease, opacity .18s ease, transform .18s ease; }
.toolbar-advanced.is-open { max-height: 240px; opacity: 1; transform: translateY(0); pointer-events: auto; }
/* Visual grouping helpers */
.toolbar .divider { width: 1px; height: 30px; background: rgba(148,163,184,.26); border-radius: 1px; }
.btn-group { display: inline-flex; gap: 8px; align-items: center; }
.toolbar-chip { display: inline-flex; align-items: center; gap: 12px; padding: 10px 14px; border: 1px solid rgba(148,163,184,.2); border-radius: 14px; background: rgba(6,12,28,.35); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); box-shadow: var(--shadow-1); transition: transform .18s ease, box-shadow .18s ease; }
.toolbar-chip:hover { transform: translateY(-1px); box-shadow: var(--shadow-2); }
.toolbar-chip .control { height: 34px; }
.profile-chip .select-trigger { min-width: 160px; }
.icon-shelf .icon-btn { border-color: var(--accent-glass-border); background: linear-gradient(145deg, var(--accent-glass), rgba(255,255,255,.06)); }
.action-btn, .action-icon, .action-text { display: none; }
.share-panel { width: 100%; margin-top: 16px; border: 1px solid rgba(148,163,184,.2); border-radius: 16px; padding: 18px; background: rgba(255,255,255,.04); box-shadow: var(--shadow-1); display: grid; gap: 12px; }
.share-panel-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; }
.share-panel-title { font-weight: 700; font-size: 16px; }
.share-panel-meta { display: inline-flex; align-items: center; gap: 8px; margin-top: 6px; color: var(--muted); font-size: 13px; flex-wrap: wrap; }
.share-panel-meta .badge { font-size: 11px; }
.share-panel-text { color: var(--muted); font-size: 14px; }
.share-panel-note { color: var(--muted); font-size: 13px; font-style: italic; }
.share-link-row { display: flex; flex-wrap: wrap; align-items: center; gap: 10px; }
.share-link-row input { flex: 1 1 220px; min-width: 200px; background: rgba(8,14,28,.6); color: var(--text); border: 1px solid rgba(148,163,184,.26); border-radius: 14px; padding: 10px 14px; box-shadow: inset 0 1px 0 rgba(255,255,255,.06); }
.share-tips { margin: 0; padding-left: 18px; display: grid; gap: 4px; color: var(--muted); font-size: 13px; }
.share-tips strong { color: var(--muted-strong); }
/* Small user badge showing who is logged in */
.user-chip { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border: 1px solid rgba(148,163,184,.22); border-radius: 999px; background: rgba(255,255,255,.05); color: var(--muted); font-size: 13px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }

/* Generic icon button */
.btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; border-radius: 12px; cursor: pointer; border: 1px solid rgba(148,163,184,.24); background: linear-gradient(170deg, rgba(255,255,255,.05), rgba(99,102,241,.12)); color: var(--text); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); box-shadow: inset 0 1px 0 rgba(255,255,255,.06); transition: transform .12s ease, filter .12s ease, box-shadow .2s ease; }
.btn-on { background: var(--accent); color: white; border-color: transparent; box-shadow: var(--shadow-1); }
.btn-on:hover, .btn-on:focus-visible { background: var(--accent-600); transform: translateY(-1px); box-shadow: 0 8px 18px rgba(99,102,241,.35); outline: none; }
.btn-off:hover, .btn-off:focus-visible { filter: brightness(1.1); transform: translateY(-1px); box-shadow: 0 6px 14px rgba(15,23,42,.22); outline: none; }

.icon-btn { width: 36px; height: 36px; display: grid; place-items: center; border-radius: 12px; border: 1px solid rgba(148,163,184,.24); background: linear-gradient(145deg, rgba(99,102,241,.16), rgba(255,255,255,.08)); color: var(--text); box-shadow: 0 4px 14px rgba(0,0,0,.22), inset 0 -1px 0 rgba(0,0,0,.14); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); transition: transform .12s ease, filter .12s ease, box-shadow .2s ease, border-color .12s ease; }
.icon-btn:hover, .icon-btn:focus-visible { filter: saturate(115%); transform: translateY(-1px) scale(1.04); border-color: var(--accent-600); box-shadow: 0 12px 26px rgba(99,102,241,.4), inset 0 -1px 0 rgba(0,0,0,.12); outline: none; }
.icon-btn.is-on { border-color: var(--accent-600); background: linear-gradient(145deg, rgba(99,102,241,.3), rgba(255,255,255,.12)); box-shadow: 0 14px 28px rgba(99,102,241,.4), inset 0 -1px 0 rgba(0,0,0,.14); }
.icon-btn:active { transform: translateY(1px); }
.favorite-toggle { display: inline-flex; align-items: center; gap: 6px; border-radius: 999px; border: 1px solid rgba(148,163,184,.26); background: rgba(255,255,255,.05); color: var(--muted); padding: 6px 12px; cursor: pointer; font-size: 12px; font-weight: 500; transition: transform .12s ease, box-shadow .18s ease, border-color .12s ease, background .18s ease; }
.favorite-toggle:hover, .favorite-toggle:focus-visible { transform: translateY(-1px); border-color: var(--accent-600); box-shadow: 0 10px 20px rgba(99,102,241,.28); outline: none; }
.favorite-toggle:active { transform: translateY(0); }
.favorite-toggle.is-on { background: rgba(250,204,21,.18); border-color: rgba(250,204,21,.45); color: #fde68a; box-shadow: 0 10px 20px rgba(250,204,21,.25); }
.favorite-toggle .favorite-icon { font-size: 14px; }
.favorite-toggle.is-on .favorite-icon { color: #fde047; }
.favorite-toggle .favorite-text { font-weight: 600; letter-spacing: .01em; }
.favorite-toggle:not(.is-on) .favorite-text { color: var(--muted); }

/* Range styling (Chromium/WebKit) */
.toolbar input[type="range"] { appearance: none; height: 6px; padding: 0; border-radius: 999px; border-color: transparent; background: linear-gradient(var(--accent), var(--accent)) 0/var(--range-pct, 0%) 100% no-repeat, var(--border); }
.toolbar input[type="range"]::-webkit-slider-runnable-track { height: 6px; background: transparent; }
.toolbar input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: var(--accent); border: 2px solid white; margin-top: -5px; }
.toolbar input[type="range"]::-moz-range-track { height: 6px; background: var(--border); border: none; }
.toolbar input[type="range"]::-moz-range-progress { background: var(--accent); height: 6px; }
.toolbar input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: var(--accent); border: 2px solid white; }

/* Radix Select styles */
.select-trigger { display: inline-flex; align-items: center; gap: 8px; background: rgba(255,255,255,.05); color: var(--text); border: 1px solid rgba(148,163,184,.24); border-radius: 12px; padding: 8px 12px; cursor: pointer; min-width: 140px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); font-weight: 500; }
.select-trigger { box-shadow: inset 0 1px 0 rgba(255,255,255,.08); transition: transform .12s ease, filter .12s ease, box-shadow .2s ease, border-color .12s ease; }
.select-trigger:hover, .select-trigger:focus-visible { filter: brightness(1.1); border-color: var(--accent-600); box-shadow: 0 6px 16px rgba(15,23,42,.22), inset 0 1px 0 rgba(255,255,255,.06); }
.select-trigger:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
.select-icon { opacity: .7; }
.select-content { background: var(--glass-bg); color: var(--text); border: 1px solid var(--glass-border); border-radius: 10px; box-shadow: var(--shadow-2); overflow: hidden; z-index: 1000; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.select-viewport { padding: 6px; }
.select-item { padding: 8px 10px; border-radius: 6px; cursor: pointer; border: 1px solid transparent; }
.select-item[aria-selected="true"], .select-item:hover { background: var(--accent-glass); color: var(--text); border-color: var(--accent-600); filter: saturate(120%); }
.select-item:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.dlg-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.35); display: grid; place-items: center; z-index: 3000; }
.dlg-box { width: min(480px, 92%); background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); padding: 14px; }

.container {
  width: min(1180px, 94%);
  margin: 0 auto;
  background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated));
  border: 1px solid rgba(148,163,184,.18);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-2);
  backdrop-filter: var(--glass-blur);
  padding: 32px clamp(20px, 4vw, 48px) 40px;
  display: flex;
  flex-direction: column;
  gap: 28px;
}
.page-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 18px;
  margin: 0;
}
.title-input { font-size: clamp(26px, 3vw, 34px); font-weight: 700; border: none; background: transparent; color: var(--text); width: 100%; }
.title-input:focus { outline: none; }
.title-display { font-size: clamp(32px, 3.4vw, 44px); font-weight: 800; margin: 0; }

.groups { display: grid; gap: 22px; z-index: -1;}
.group { background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated)); border: 1px solid rgba(148,163,184,.18); border-radius: 18px; padding: 18px; display: flex; flex-direction: column; gap: 12px; overflow: hidden; box-shadow: var(--shadow-1); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.group-header { display: grid; grid-template-columns: minmax(0, 1fr) auto; align-items: center; gap: 12px; }
.group-title { width: 100%; min-width: 0; font-size: 16px; background: rgba(255,255,255,.04); border: 1px solid rgba(148,163,184,.25); color: var(--text); border-radius: 12px; padding: 8px 12px; font-weight: 600; letter-spacing: -.01em; }
.group-title-static { font-weight: 600; padding: 8px 12px; border: 1px solid rgba(148,163,184,.22); border-radius: 12px; background: rgba(255,255,255,.04); letter-spacing: -.01em; }
.group-actions { display: inline-flex; flex-shrink: 0; gap: 6px; opacity: .9; transition: opacity .15s ease; white-space: nowrap; }
.group:hover .group-actions, .group:focus-within .group-actions { opacity: 1; }
.group-actions button { padding: 0; }
.group-actions .icon-btn { margin-left: 2px; }

.tiles { display: grid; gap: 14px; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
.tiles-compact { gap: 10px; }
.tile-all { display: grid; gap: 8px; }
.tile-chip { font-size: 11px; color: var(--muted); justify-self: end; }

.tile { position: relative; display: grid; gap: 12px; border: 1px solid rgba(148,163,184,.24); border-radius: 20px; padding: 18px; background:
    radial-gradient(120% 140% at 0% 0%, rgba(99,102,241,.18), transparent 55%),
    linear-gradient(165deg, rgba(12,18,38,.92), rgba(22,30,58,.97));
  overflow: visible; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.tile::before { content: ""; position: absolute; inset: 1px; border-radius: 18px; border: 1px solid rgba(255,255,255,.04); pointer-events: none; }
.tile-main { display: grid; grid-template-columns: 48px 1fr auto; gap: 16px; text-decoration: none; color: inherit; }
.tile-icon { width: 48px; height: 48px; display: grid; place-items: center; border-radius: 14px; background: rgba(255,255,255,.1); overflow: hidden; outline: none; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); box-shadow: inset 0 1px 0 rgba(255,255,255,.12); }
.tile-icon img { width: 24px; height: 24px; }
.tile-text { display: grid; gap: 6px; }
.tile-text input, .tile-text select { min-width: 0; }
.tile-right { display: flex; align-items: flex-start; gap: 6px; }
.drag-handle { width: 28px; height: 28px; display: grid; place-items: center; border-radius: 8px; border: 1px dashed var(--border-strong); color: var(--muted); cursor: grab; }
.drag-handle:active { cursor: grabbing; }
.tile-badges { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 4px; }
.badge { font-size: 10px; color: white; background: var(--accent); padding: 2px 6px; border-radius: 999px; }
.badge-env { background: #0ea5e9; }
.badge-critical { background: #ef4444; }
.badge-high { background: #f59e0b; }
.badge-medium { background: #22c55e; }
.badge-low { background: #64748b; }
.badge-user { background: #22c55e; }
.badge-group { background: #38bdf8; }
.badge-default { background: var(--accent); }
.badge-shared { background: #f97316; }
.badge-self { background: #ec4899; }
.tile-meta { display: grid; grid-template-columns: 1fr; gap: 8px; }
.tile-meta input, .tile-meta select { width: 100%; min-width: 0; }
.field { display: grid; gap: 4px; }
.field-label { font-size: 11px; color: var(--muted); }
.tile-link { text-decoration: none; color: inherit; display: grid; gap: 4px; }
.tile-title-static { font-weight: 700; }
.tile-url-static { font-size: 12px; color: var(--muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.tile-title, .tile-url, .tile-desc { width: 100%; background: rgba(255,255,255,.04); color: var(--text); border: 1px solid rgba(148,163,184,.25); border-radius: 12px; padding: 8px 12px; }
.tile-title:focus-visible, .tile-url:focus-visible, .tile-desc:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-color: var(--accent); background: rgba(99,102,241,.12); }
.tile-title { font-weight: 600; }
.tile-url { font-size: 12px; color: var(--muted); }
.tile-actions { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; opacity: 1; }
.tile-actions input[type="color"] { width: 48px; height: 36px; padding: 0; background: rgba(255,255,255,.06); border: 1px solid rgba(148,163,184,.25); border-radius: 12px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.tile-actions .icon-btn { padding: 0; }
.tile-icon-input { flex: 1; min-width: 200px; background: rgba(255,255,255,.05); color: var(--text); border: 1px solid rgba(148,163,184,.25); border-radius: 12px; padding: 8px 12px; }

/* Style native selects inside tiles to match theme */
.tile-text select, .tile-meta select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: rgba(255,255,255,.04);
  color: var(--text);
  border: 1px solid rgba(148,163,184,.25);
  border-radius: 12px;
  padding: 8px 12px;
  color-scheme: inherit;
  cursor: pointer;
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
}
/* Wide inputs in meta so they donâ€™t overflow */
.tile-text input, .tile-meta input { background: rgba(255,255,255,.04); color: var(--text); border: 1px solid rgba(148,163,184,.25); border-radius: 12px; padding: 8px 12px; }

/* Chips input */
.chips-wrap { position: relative; display: grid; gap: 6px; }
.chips { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; min-height: 38px; padding: 6px 8px; border: 1px solid rgba(148,163,184,.24); border-radius: 14px; background: rgba(255,255,255,.05); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.chip { display: inline-flex; align-items: center; gap: 6px; background: var(--accent-soft); color: var(--text); border: 1px solid rgba(148,163,184,.26); padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 500; }
.chip-x { background: transparent; color: inherit; border: none; padding: 0; cursor: pointer; opacity: .8; }
.chip-x:hover { opacity: 1; }
.chip-input { flex: 1; min-width: 80px; border: none; background: transparent; color: var(--text); outline: none; padding: 4px 6px; }
.chips-popover { position: absolute; left: 0; right: 0; top: calc(100% + 6px); background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 10px; padding: 4px; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); max-height: 220px; overflow: auto; z-index: 3000; }
.chips-popover.is-up { top: auto; bottom: calc(100% + 6px); }
.chip-option { display: block; width: 100%; text-align: left; background: transparent; color: var(--text); border: 1px solid transparent; border-radius: 12px; padding: 8px 10px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.chip-option:hover { background: rgba(255,255,255,.06); border-color: rgba(148,163,184,.24); }
.chip-option.is-active { background: var(--accent-glass); color: var(--text); border-color: var(--accent-600); box-shadow: 0 2px 0 rgba(0,0,0,.12); }
.chip-option:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.add-group, .add-tile { border: 1px dashed rgba(148,163,184,.32); background: rgba(255,255,255,.04); color: var(--text); padding: 14px; border-radius: 14px; cursor: pointer; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); font-weight: 600; letter-spacing: -.01em; transition: transform .12s ease, box-shadow .2s ease, border-color .12s ease; }
.add-group:hover, .add-tile:hover { transform: translateY(-1px); box-shadow: var(--shadow-1); border-color: var(--accent-600); }
.add-group { height: 52px; grid-column: 1 / -1; }

/* Status indicator */
.status { width: 10px; height: 10px; border-radius: 50%; align-self: start; margin-left: auto; margin-top: 2px; box-shadow: 0 0 0 2px rgba(0,0,0,.2) inset; }
.status.ok { background: #10b981; }
.status.bad { background: #ef4444; }
.status.unk { background: #9ca3af; }

/* List view */
.list-view { display: grid; gap: 12px; }
.list-header, .list-row { display: grid; grid-template-columns: 2fr 1.6fr 1fr auto; gap: 12px; align-items: center; }
.list-header { font-weight: 700; color: var(--muted); padding: 8px 6px; text-transform: uppercase; font-size: 11px; letter-spacing: .08em; }
.list-row { background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated)); border: 1px solid rgba(148,163,184,.18); border-radius: 16px; padding: 14px 16px; -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); box-shadow: var(--shadow-1); }
.list-row a { color: var(--accent); text-decoration: none; }
.list-row > div { min-width: 0; }
.list-row input {
  width: 100%;
  background: rgba(255,255,255,.04);
  color: var(--text);
  border: 1px solid rgba(148,163,184,.24);
  border-radius: 12px;
  padding: 8px 12px;
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
}

/* Status dot for list view */
.status-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 6px; box-shadow: 0 0 0 2px rgba(0,0,0,.2) inset; }
.status-online { background: #10b981; }
.status-offline { background: #ef4444; }
.status-unknown { background: #9ca3af; }

@media (max-width: 1200px) {
  body { padding: 28px 0 36px; }
  .container { width: min(96%, 1120px); }
}

@media (max-width: 900px) {
  body { padding: 24px 0 32px; }
  .container { padding: 26px clamp(16px, 6vw, 28px) 32px; gap: 24px; }
  .toolbar { flex-direction: column; align-items: stretch; }
  .toolbar .search { width: 100%; min-width: 0; }
  .toolbar-chip { width: 100%; justify-content: space-between; }
  .profile-chip .select-trigger { width: 100%; justify-content: space-between; }
  .btn-group { justify-content: flex-end; }
  .toolbar-row-main { flex-direction: column; align-items: stretch; gap: 10px; }
  .toolbar-row-profile { flex-direction: column; align-items: stretch; gap: 16px; }
  .actions-section { justify-content: flex-start; }
  .toolbar-action-menu { right: 0; top: calc(100% + 6px); min-width: min(260px, 85vw); }
  .toolbar-edit { width: 100%; }
  .groups { grid-template-columns: 1fr !important; }
  .admin-tabs { width: 100%; }
  .admin-tab { flex: 1; }
  .admin-card { padding: 22px 18px 26px; }
  .admin-scope-actions { justify-content: flex-start; }
}

@media (max-width: 720px) {
  .tiles { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}

@media (max-width: 640px) {
  .container { width: 94%; padding: 22px 16px 28px; gap: 20px; }
  .tiles { grid-template-columns: 1fr !important; }
  .tile { padding: 14px; }
  .tile-main { grid-template-columns: 44px 1fr auto; gap: 12px; }
  .tile-icon { width: 44px; height: 44px; }
  .tile-icon img { width: 20px; height: 20px; }
  .list-header { display: none; }
  .list-row { grid-template-columns: 1fr; gap: 10px; }
  .toolbar { gap: 12px; }
  .toolbar .label-text { display: none; }
  .toolbar .more-btn { display: inline-flex; margin-left: 0; }
  .toolbar .toolbar-advanced, .toolbar .toolbar-advanced.is-open { width: 100%; }
  .toolbar-chip { width: 100%; }
  .user-chip { width: 100%; justify-content: center; }
  .toolbar-row-profile { gap: 12px; }
  .actions-section { flex-direction: column; align-items: stretch; }
  .toolbar-action-toggle { width: 100%; justify-content: center; }
  .action-menu-item { justify-content: center; }
  .profile-new-actions { width: 100%; justify-content: space-between; gap: 8px; }
  .admin-header { flex-direction: column; align-items: flex-start; gap: 12px; }
  .admin-infobar { flex-direction: column; align-items: flex-start; }
  .admin-tabs { justify-content: space-between; }
  .admin-scope-row { gap: 12px; }
  .admin-scope-actions { width: 100%; justify-content: flex-start; }
  .admin-identity-grid { grid-template-columns: 1fr; }
  .share-link-row input { flex: 1 1 100%; }
}

/* Embedded toolbar and header layout overrides */
.page-header .toolbar .search { max-width: none; }

/* Native options in selects (where supported) */
.tile-text select option, .tile-meta select option { background: var(--panel); color: var(--text); }

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

/* Visually hidden utility for accessible labels */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap; border: 0;
}

/* Toast (snackbar) */
.toast-wrap { position: fixed; right: 16px; bottom: 16px; display: grid; gap: 10px; z-index: 2000; }
.toast { position: relative; background: var(--glass-bg); color: var(--text); border: 1px solid var(--glass-border); border-radius: 12px; padding: 12px 14px; box-shadow: var(--shadow-2); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); overflow: hidden; }
.toast--success { border-color: rgba(34,197,94,.45); background: linear-gradient(180deg, rgba(34,197,94,.15), rgba(255,255,255,.04)); }
.toast--error { border-color: rgba(239,68,68,.45); background: linear-gradient(180deg, rgba(239,68,68,.15), rgba(255,255,255,.04)); }
.toast--info { border-color: rgba(99,102,241,.45); background: linear-gradient(180deg, rgba(99,102,241,.15), rgba(255,255,255,.04)); }
.toast-progress { position: absolute; left: 0; bottom: 0; height: 3px; background: var(--accent); width: 100%; animation: toastbar 2.5s linear forwards; opacity: .85; }
@keyframes toastbar { to { width: 0; opacity: .6; } }
/* Prevent controls from overlapping in group headers */
.group-header { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.group-actions { display: inline-flex; align-items: center; gap: 6px; flex-wrap: wrap; }

/* Admin UX helpers */
.admin-container { gap: 28px; }
.admin-header { display: flex; align-items: center; justify-content: space-between; gap: 20px; flex-wrap: wrap; }
.admin-subtitle { color: var(--muted); font-size: 15px; margin-top: 6px; max-width: 560px; }
.admin-help-btn { white-space: nowrap; }
.admin-header-actions { display: inline-flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.admin-home-btn { display: inline-flex; align-items: center; gap: 6px; border-radius: 999px; padding-inline: 18px; }
.admin-infobar { display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap; padding: 16px 18px; border: 1px solid rgba(148,163,184,.2); border-radius: var(--radius-md); background: rgba(255,255,255,.05); box-shadow: inset 0 1px 0 rgba(255,255,255,.05); }
.admin-userline { display: inline-flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.admin-user { font-weight: 600; }
.admin-groups { color: var(--muted); font-size: 13px; }
.help-panel { margin-top: 8px; border: 1px solid rgba(148,163,184,.22); border-radius: 16px; background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated)); padding: 16px 18px; box-shadow: var(--shadow-1); -webkit-backdrop-filter: var(--glass-blur); backdrop-filter: var(--glass-blur); }
.admin-help-title { font-weight: 600; margin-bottom: 8px; }
.admin-help-list { margin: 0; padding: 0; list-style: none; display: grid; gap: 8px; font-size: 14px; color: var(--muted); }
.admin-help-list li { background: rgba(255,255,255,.04); border: 1px solid rgba(148,163,184,.16); border-radius: 12px; padding: 8px 12px; }
.admin-help-list code { font-size: 12px; }
.admin-tabs { display: inline-flex; gap: 12px; padding: 6px; border: 1px solid rgba(148,163,184,.2); border-radius: var(--radius-md); background: rgba(255,255,255,.04); box-shadow: inset 0 1px 0 rgba(255,255,255,.06); flex-wrap: wrap; }
.admin-tab { border: none; background: transparent; color: var(--muted); font-weight: 600; padding: 10px 18px; border-radius: 12px; cursor: pointer; transition: background .18s ease, color .18s ease, transform .16s ease, box-shadow .18s ease; }
.admin-tab:hover { color: var(--text); background: rgba(255,255,255,.08); }
.admin-tab.is-active { background: var(--accent); color: white; box-shadow: var(--shadow-1); }
.admin-card { display: grid; gap: 22px; border: 1px solid rgba(148,163,184,.2); border-radius: var(--radius-lg); padding: 24px clamp(18px, 4vw, 32px) 30px; background: linear-gradient(160deg, var(--panel-muted), var(--panel-elevated)); box-shadow: var(--shadow-1); }
.admin-card-header { display: flex; align-items: center; justify-content: space-between; gap: 18px; flex-wrap: wrap; }
.admin-card-actions { display: inline-flex; gap: 10px; }
.admin-card-subtitle { color: var(--muted); margin-top: 6px; max-width: 520px; font-size: 14px; }
.admin-toolbar { margin: 0; border: 1px solid rgba(148,163,184,.2); background: rgba(255,255,255,.03); box-shadow: none; }
.admin-toolbar:hover { transform: none; box-shadow: none; }
.admin-toolbar-control { display: inline-flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.admin-toolbar-control label { font-weight: 600; color: var(--muted); }
.admin-identity-toolbar { row-gap: 14px; }
.admin-note { color: var(--muted); font-size: 14px; }
.admin-error { color: var(--danger); font-weight: 600; }
.admin-empty { border: 1px dashed rgba(148,163,184,.3); border-radius: 16px; padding: 18px; text-align: center; background: rgba(255,255,255,.04); }
.admin-empty h3 { margin-bottom: 6px; font-size: 18px; }
.admin-empty p { color: var(--muted); }
.admin-scope-list .list-header, .admin-scope-list .admin-scope-row { grid-template-columns: 1.8fr 1.6fr 1fr auto; }
.admin-scope-row { align-items: center; gap: 18px; padding: 20px; border-radius: 20px; background: linear-gradient(155deg, rgba(12,20,40,.82), rgba(20,28,52,.9)); border: 1px solid rgba(148,163,184,.22); box-shadow: 0 16px 32px rgba(5,10,25,.32), inset 0 1px 0 rgba(255,255,255,.05); }
.admin-scope-row.is-active { border-color: rgba(99,102,241,.48); box-shadow: 0 22px 40px rgba(99,102,241,.24); }
.admin-scope-key { display: inline-flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.admin-scope-key code { background: rgba(99,102,241,.18); border-radius: 12px; padding: 6px 12px; border: 1px solid rgba(148,163,184,.26); font-family: "JetBrains Mono", "Fira Code", monospace; font-size: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,.08); color: var(--muted-strong); }
.admin-scope-owner { display: grid; gap: 4px; }
.admin-owner-badges { display: inline-flex; gap: 6px; align-items: center; flex-wrap: wrap; }
.admin-owner-name { font-weight: 600; }
.admin-owner-meta { color: var(--muted); font-size: 12px; }
.admin-scope-updated { color: var(--muted); font-size: 13px; }
.admin-scope-actions { display: flex; flex-wrap: wrap; gap: 12px; justify-content: flex-end; }
.admin-scope-actions .secondary-btn { border-radius: 999px; padding: 8px 18px; background: rgba(255,255,255,.06); border-color: rgba(148,163,184,.28); box-shadow: inset 0 1px 0 rgba(255,255,255,.08); }
.admin-scope-actions .secondary-btn:hover { background: rgba(99,102,241,.18); border-color: rgba(99,102,241,.45); }
.admin-scope-actions .icon-btn { border-radius: 12px; }
.admin-compact-input { max-width: 240px; flex: 1 1 auto; }
.admin-pagination { align-items: center; gap: 10px !important; }
.admin-identity-grid { display: grid; gap: 18px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
.admin-identity-card { display: grid; gap: 14px; border: 1px solid rgba(148,163,184,.2); border-radius: 18px; padding: 18px; background: rgba(255,255,255,.04); box-shadow: inset 0 1px 0 rgba(255,255,255,.05); }
.admin-identity-card--form { align-content: flex-start; }
.admin-section-title { font-size: 16px; font-weight: 600; }
.admin-groups-list { display: grid; gap: 10px; }
.admin-group-row { display: flex; align-items: center; gap: 8px; }
.admin-group-row .tile-icon-input { flex: 1; }
.admin-chip-group { display: flex; flex-wrap: wrap; gap: 8px; }
.admin-user-wrapper { display: grid; }
.admin-user-row { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid rgba(148,163,184,.18); }
.admin-user-row:last-child { border-bottom: none; }
.admin-user-main { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 2px; }
.admin-user-name { font-weight: 600; }
.admin-user-email { color: var(--muted); font-size: 13px; }
.admin-user-details { position: relative; }
.admin-user-details summary::-webkit-details-marker { display: none; }
.admin-user-edit { transition: transform .2s ease; }
.admin-user-details[open] .admin-user-edit { transform: rotate(45deg); }
.admin-user-edit-panel { margin-top: 10px; border: 1px solid rgba(148,163,184,.22); border-radius: 14px; padding: 12px; background: rgba(255,255,255,.04); box-shadow: inset 0 1px 0 rgba(255,255,255,.05); display: grid; gap: 12px; }
.admin-reset-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.admin-caption { color: var(--muted); font-size: 12px; letter-spacing: .08em; text-transform: uppercase; }
