"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profile/label/route";
exports.ids = ["app/api/profile/label/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Flabel%2Froute&page=%2Fapi%2Fprofile%2Flabel%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Flabel%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Flabel%2Froute&page=%2Fapi%2Fprofile%2Flabel%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Flabel%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_src_app_api_profile_label_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/profile/label/route.ts */ \"(rsc)/./src/app/api/profile/label/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profile/label/route\",\n        pathname: \"/api/profile/label\",\n        filename: \"route\",\n        bundlePath: \"app/api/profile/label/route\"\n    },\n    resolvedPagePath: \"/app/src/app/api/profile/label/route.ts\",\n    nextConfigOutput,\n    userland: _app_src_app_api_profile_label_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/profile/label/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlJTJGbGFiZWwlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb2ZpbGUlMkZsYWJlbCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb2ZpbGUlMkZsYWJlbCUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDVDtBQUNwRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2h5LW5leHQtZGFzaGJvYXJkLz9iOTdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9hcHAvc3JjL2FwcC9hcGkvcHJvZmlsZS9sYWJlbC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZmlsZS9sYWJlbC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2ZpbGUvbGFiZWxcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2ZpbGUvbGFiZWwvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvYXBwL3NyYy9hcHAvYXBpL3Byb2ZpbGUvbGFiZWwvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb2ZpbGUvbGFiZWwvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Flabel%2Froute&page=%2Fapi%2Fprofile%2Flabel%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Flabel%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/profile/label/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/profile/label/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_server_keycloak__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/server/keycloak */ \"(rsc)/./src/lib/server/keycloak.ts\");\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nasync function GET(req) {\n    const { searchParams } = new URL(req.url);\n    const key = searchParams.get(\"key\") || \"\";\n    if (!key) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Missing key\"\n    }, {\n        status: 400\n    });\n    try {\n        if (key.startsWith(\"group:\")) {\n            const name = key.slice(6);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                key,\n                label: `Grupo: ${name}`\n            }, {\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        if (key.startsWith(\"user:\")) {\n            const id = key.slice(5);\n            // Best effort: prefer full name (firstName + lastName), then email, then username, then short id\n            try {\n                const u = await (0,_lib_server_keycloak__WEBPACK_IMPORTED_MODULE_1__.kcGetUser)(id);\n                const full = [\n                    u?.firstName,\n                    u?.lastName\n                ].filter(Boolean).join(\" \").trim();\n                const label = full || u?.email || u?.username || `user:${id.slice(0, 8)}`;\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    key,\n                    label\n                }, {\n                    headers: {\n                        \"Cache-Control\": \"no-store\"\n                    }\n                });\n            } catch  {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    key,\n                    label: `user:${id.slice(0, 8)}`\n                }, {\n                    headers: {\n                        \"Cache-Control\": \"no-store\"\n                    }\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            key,\n            label: key\n        }, {\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: e?.message || \"error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm9maWxlL2xhYmVsL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNOO0FBRTNDLE1BQU1FLFVBQVUsU0FBUztBQUN6QixNQUFNQyxVQUFVLGdCQUFnQjtBQUNoQyxNQUFNQyxhQUFhLEVBQUU7QUFFckIsZUFBZUMsSUFBSUMsR0FBZ0I7SUFDeEMsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixJQUFJRyxHQUFHO0lBQ3hDLE1BQU1DLE1BQU1ILGFBQWFJLEdBQUcsQ0FBQyxVQUFVO0lBQ3ZDLElBQUksQ0FBQ0QsS0FBSyxPQUFPVixxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBYyxHQUFHO1FBQUVDLFFBQVE7SUFBSTtJQUMzRSxJQUFJO1FBQ0YsSUFBSUosSUFBSUssVUFBVSxDQUFDLFdBQVc7WUFDNUIsTUFBTUMsT0FBT04sSUFBSU8sS0FBSyxDQUFDO1lBQ3ZCLE9BQU9qQixxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO2dCQUFFRjtnQkFBS1EsT0FBTyxDQUFDLE9BQU8sRUFBRUYsS0FBSyxDQUFDO1lBQUMsR0FBRztnQkFBRUcsU0FBUztvQkFBRSxpQkFBaUI7Z0JBQVc7WUFBRTtRQUN4RztRQUNBLElBQUlULElBQUlLLFVBQVUsQ0FBQyxVQUFVO1lBQzNCLE1BQU1LLEtBQUtWLElBQUlPLEtBQUssQ0FBQztZQUNyQixpR0FBaUc7WUFDakcsSUFBSTtnQkFDRixNQUFNSSxJQUFTLE1BQU1wQiwrREFBU0EsQ0FBQ21CO2dCQUMvQixNQUFNRSxPQUFPO29CQUFDRCxHQUFHRTtvQkFBV0YsR0FBR0c7aUJBQVMsQ0FBQ0MsTUFBTSxDQUFDQyxTQUFTQyxJQUFJLENBQUMsS0FBS0MsSUFBSTtnQkFDdkUsTUFBTVYsUUFBUUksUUFBUUQsR0FBR1EsU0FBU1IsR0FBR1MsWUFBWSxDQUFDLEtBQUssRUFBRVYsR0FBR0gsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUN6RSxPQUFPakIscURBQVlBLENBQUNZLElBQUksQ0FBQztvQkFBRUY7b0JBQUtRO2dCQUFNLEdBQUc7b0JBQUVDLFNBQVM7d0JBQUUsaUJBQWlCO29CQUFXO2dCQUFFO1lBQ3RGLEVBQUUsT0FBTTtnQkFDTixPQUFPbkIscURBQVlBLENBQUNZLElBQUksQ0FBQztvQkFBRUY7b0JBQUtRLE9BQU8sQ0FBQyxLQUFLLEVBQUVFLEdBQUdILEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFBQyxHQUFHO29CQUFFRSxTQUFTO3dCQUFFLGlCQUFpQjtvQkFBVztnQkFBRTtZQUNoSDtRQUNGO1FBQ0EsT0FBT25CLHFEQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFBRUY7WUFBS1EsT0FBT1I7UUFBSSxHQUFHO1lBQUVTLFNBQVM7Z0JBQUUsaUJBQWlCO1lBQVc7UUFBRTtJQUMzRixFQUFFLE9BQU9ZLEdBQVE7UUFDZixPQUFPL0IscURBQVlBLENBQUNZLElBQUksQ0FBQztZQUFFQyxPQUFPa0IsR0FBR0MsV0FBVztRQUFRLEdBQUc7WUFBRWxCLFFBQVE7UUFBSTtJQUMzRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGFzaHktbmV4dC1kYXNoYm9hcmQvLi9zcmMvYXBwL2FwaS9wcm9maWxlL2xhYmVsL3JvdXRlLnRzPzY3MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsga2NHZXRVc2VyIH0gZnJvbSBcIkAvbGliL3NlcnZlci9rZXljbG9ha1wiO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCI7XG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xuZXhwb3J0IGNvbnN0IHJldmFsaWRhdGUgPSAwO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxLnVybCk7XG4gIGNvbnN0IGtleSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJrZXlcIikgfHwgXCJcIjtcbiAgaWYgKCFrZXkpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1pc3Npbmcga2V5XCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgdHJ5IHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoXCJncm91cDpcIikpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBrZXkuc2xpY2UoNik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBrZXksIGxhYmVsOiBgR3J1cG86ICR7bmFtZX1gIH0sIHsgaGVhZGVyczogeyBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiIH0gfSk7XG4gICAgfVxuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcInVzZXI6XCIpKSB7XG4gICAgICBjb25zdCBpZCA9IGtleS5zbGljZSg1KTtcbiAgICAgIC8vIEJlc3QgZWZmb3J0OiBwcmVmZXIgZnVsbCBuYW1lIChmaXJzdE5hbWUgKyBsYXN0TmFtZSksIHRoZW4gZW1haWwsIHRoZW4gdXNlcm5hbWUsIHRoZW4gc2hvcnQgaWRcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHU6IGFueSA9IGF3YWl0IGtjR2V0VXNlcihpZCk7XG4gICAgICAgIGNvbnN0IGZ1bGwgPSBbdT8uZmlyc3ROYW1lLCB1Py5sYXN0TmFtZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBmdWxsIHx8IHU/LmVtYWlsIHx8IHU/LnVzZXJuYW1lIHx8IGB1c2VyOiR7aWQuc2xpY2UoMCwgOCl9YDtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsga2V5LCBsYWJlbCB9LCB7IGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGtleSwgbGFiZWw6IGB1c2VyOiR7aWQuc2xpY2UoMCwgOCl9YCB9LCB7IGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBrZXksIGxhYmVsOiBrZXkgfSwgeyBoZWFkZXJzOiB7IFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIgfSB9KTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgXCJlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJrY0dldFVzZXIiLCJydW50aW1lIiwiZHluYW1pYyIsInJldmFsaWRhdGUiLCJHRVQiLCJyZXEiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJrZXkiLCJnZXQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzdGFydHNXaXRoIiwibmFtZSIsInNsaWNlIiwibGFiZWwiLCJoZWFkZXJzIiwiaWQiLCJ1IiwiZnVsbCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJ0cmltIiwiZW1haWwiLCJ1c2VybmFtZSIsImUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/profile/label/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server/keycloak.ts":
/*!************************************!*\
  !*** ./src/lib/server/keycloak.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kcAddUserToGroup: () => (/* binding */ kcAddUserToGroup),\n/* harmony export */   kcCreateGroup: () => (/* binding */ kcCreateGroup),\n/* harmony export */   kcCreateUser: () => (/* binding */ kcCreateUser),\n/* harmony export */   kcDeleteGroup: () => (/* binding */ kcDeleteGroup),\n/* harmony export */   kcDeleteUser: () => (/* binding */ kcDeleteUser),\n/* harmony export */   kcGetUser: () => (/* binding */ kcGetUser),\n/* harmony export */   kcGroupMembers: () => (/* binding */ kcGroupMembers),\n/* harmony export */   kcListGroups: () => (/* binding */ kcListGroups),\n/* harmony export */   kcListUsers: () => (/* binding */ kcListUsers),\n/* harmony export */   kcRemoveUserFromGroup: () => (/* binding */ kcRemoveUserFromGroup),\n/* harmony export */   kcRenameGroup: () => (/* binding */ kcRenameGroup),\n/* harmony export */   kcSetUserPassword: () => (/* binding */ kcSetUserPassword),\n/* harmony export */   kcUserGroups: () => (/* binding */ kcUserGroups),\n/* harmony export */   kcUsersCount: () => (/* binding */ kcUsersCount)\n/* harmony export */ });\n// Keycloak Admin REST helpers\n// Uses admin user credentials to obtain a token and call admin endpoints\nfunction parseIssuer() {\n    const issuer = process.env.KEYCLOAK_ISSUER || \"\"; // e.g., http://keycloak:8080/realms/myrealm\n    const m = issuer.match(/^(https?:\\/\\/[^/]+)\\/realms\\/([^/]+)/i);\n    if (!m) throw new Error(\"KEYCLOAK_ISSUER inv\\xe1lido\");\n    return {\n        base: m[1],\n        realm: m[2]\n    };\n}\nlet cached = null;\nasync function getAdminToken() {\n    const now = Math.floor(Date.now() / 1000);\n    if (cached && cached.exp - 30 > now) return cached.token;\n    const { base } = parseIssuer();\n    const username = process.env.KEYCLOAK_ADMIN_USER || process.env.KEYCLOAK_ADMIN || \"admin\";\n    const password = process.env.KEYCLOAK_ADMIN_PASSWORD || \"admin\";\n    const url = `${base}/realms/master/protocol/openid-connect/token`;\n    const body = new URLSearchParams({\n        grant_type: \"password\",\n        client_id: \"admin-cli\",\n        username,\n        password\n    });\n    const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n        },\n        body\n    });\n    if (!res.ok) throw new Error(`Keycloak token error: ${res.status}`);\n    const json = await res.json();\n    cached = {\n        token: json.access_token,\n        exp: Math.floor(Date.now() / 1000) + (json.expires_in || 60)\n    };\n    return cached.token;\n}\nasync function kc(method, path, data) {\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    const res = await fetch(`${base}${path}`, {\n        method,\n        headers: {\n            Authorization: `Bearer ${token}`,\n            ...data ? {\n                \"content-type\": \"application/json\"\n            } : {}\n        },\n        body: data ? JSON.stringify(data) : undefined\n    });\n    if (res.status === 204) return undefined;\n    if (!res.ok) throw new Error(`Keycloak error ${res.status}`);\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (ct.includes(\"application/json\")) return await res.json();\n    // For create endpoints, id can be in Location header\n    return undefined;\n}\nasync function kcListGroups() {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/groups`);\n}\nasync function kcCreateGroup(name) {\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    const res = await fetch(`${base}/admin/realms/${realm}/groups`, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            name\n        })\n    });\n    if (!res.ok) throw new Error(`Keycloak create group ${res.status}`);\n    const loc = res.headers.get(\"location\") || \"\";\n    const m = loc.match(/\\/groups\\/([^/]+)$/);\n    return m ? m[1] : undefined;\n}\nasync function kcRenameGroup(id, name) {\n    const { realm } = parseIssuer();\n    await kc(\"PUT\", `/admin/realms/${realm}/groups/${id}`, {\n        name\n    });\n}\nasync function kcDeleteGroup(id) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/groups/${id}`);\n}\nasync function kcListUsers(search, first, max) {\n    const { realm } = parseIssuer();\n    const params = new URLSearchParams();\n    if (search) params.set(\"search\", search);\n    if (typeof first === \"number\") params.set(\"first\", String(first));\n    if (typeof max === \"number\") params.set(\"max\", String(max));\n    const qs = params.toString();\n    const q = qs ? `?${qs}` : \"\";\n    return kc(\"GET\", `/admin/realms/${realm}/users${q}`);\n}\nasync function kcCreateUser(params) {\n    const { username, email, password, groups } = params;\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    let res = await fetch(`${base}/admin/realms/${realm}/users`, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            username,\n            email,\n            enabled: true\n        })\n    });\n    if (!res.ok) throw new Error(`Keycloak create user ${res.status}`);\n    const loc = res.headers.get(\"location\") || \"\";\n    const m = loc.match(/\\/users\\/([^/]+)$/);\n    const id = m ? m[1] : \"\";\n    if (!id) throw new Error(\"No se pudo obtener ID de usuario\");\n    if (password) {\n        await fetch(`${base}/admin/realms/${realm}/users/${id}/reset-password`, {\n            method: \"PUT\",\n            headers: {\n                Authorization: `Bearer ${token}`,\n                \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                type: \"password\",\n                value: password,\n                temporary: false\n            })\n        });\n    }\n    if (groups && groups.length) {\n        for (const gid of groups){\n            await fetch(`${base}/admin/realms/${realm}/users/${id}/groups/${gid}`, {\n                method: \"PUT\",\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            });\n        }\n    }\n    return id;\n}\nasync function kcDeleteUser(id) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/users/${id}`);\n}\nasync function kcSetUserPassword(id, password, temporary = false) {\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    await fetch(`${base}/admin/realms/${realm}/users/${id}/reset-password`, {\n        method: \"PUT\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            type: \"password\",\n            value: password,\n            temporary\n        })\n    });\n}\nasync function kcUserGroups(id) {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/users/${id}/groups`);\n}\nasync function kcAddUserToGroup(id, groupId) {\n    const { realm } = parseIssuer();\n    await kc(\"PUT\", `/admin/realms/${realm}/users/${id}/groups/${groupId}`);\n}\nasync function kcRemoveUserFromGroup(id, groupId) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/users/${id}/groups/${groupId}`);\n}\nasync function kcUsersCount(search) {\n    const { realm } = parseIssuer();\n    const q = search ? `?search=${encodeURIComponent(search)}` : \"\";\n    const data = await kc(\"GET\", `/admin/realms/${realm}/users/count${q}`);\n    // Keycloak returns a number directly in some versions\n    if (typeof data === \"number\") return data;\n    return data?.count ?? 0;\n}\nasync function kcGroupMembers(groupId, first, max) {\n    const { realm } = parseIssuer();\n    const params = new URLSearchParams();\n    if (typeof first === \"number\") params.set(\"first\", String(first));\n    if (typeof max === \"number\") params.set(\"max\", String(max));\n    const q = params.toString() ? `?${params.toString()}` : \"\";\n    return kc(\"GET\", `/admin/realms/${realm}/groups/${groupId}/members${q}`);\n}\nasync function kcGetUser(id) {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/users/${id}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sWUFBWSxFQUFFc0QsRUFBRSxDQUFDO0lBQ3hGLHNEQUFzRDtJQUN0RCxJQUFJLE9BQVF4QixTQUFpQixVQUFVLE9BQU9BO0lBQzlDLE9BQU8sTUFBZTBDLFNBQVM7QUFDakM7QUFFTyxlQUFlQyxlQUFlTCxPQUFlLEVBQUVyQixLQUFjLEVBQUVDLEdBQVk7SUFDaEYsTUFBTSxFQUFFaEQsS0FBSyxFQUFFLEdBQUdUO0lBQ2xCLE1BQU0wRCxTQUFTLElBQUlqQztJQUNuQixJQUFJLE9BQU8rQixVQUFVLFVBQVVFLE9BQU9DLEdBQUcsQ0FBQyxTQUFTQyxPQUFPSjtJQUMxRCxJQUFJLE9BQU9DLFFBQVEsVUFBVUMsT0FBT0MsR0FBRyxDQUFDLE9BQU9DLE9BQU9IO0lBQ3RELE1BQU1NLElBQUlMLE9BQU9JLFFBQVEsS0FBSyxDQUFDLENBQUMsRUFBRUosT0FBT0ksUUFBUSxHQUFHLENBQUMsR0FBRztJQUN4RCxPQUFPekIsR0FBRyxPQUFPLENBQUMsY0FBYyxFQUFFNUIsTUFBTSxRQUFRLEVBQUVvRSxRQUFRLFFBQVEsRUFBRWQsRUFBRSxDQUFDO0FBQ3pFO0FBRU8sZUFBZW9CLFVBQVUvQixFQUFVO0lBQ3hDLE1BQU0sRUFBRTNDLEtBQUssRUFBRSxHQUFHVDtJQUNsQixPQUFPcUMsR0FBRyxPQUFPLENBQUMsY0FBYyxFQUFFNUIsTUFBTSxPQUFPLEVBQUUyQyxHQUFHLENBQUM7QUFDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXNoeS1uZXh0LWRhc2hib2FyZC8uL3NyYy9saWIvc2VydmVyL2tleWNsb2FrLnRzPzg5NGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gS2V5Y2xvYWsgQWRtaW4gUkVTVCBoZWxwZXJzXG4vLyBVc2VzIGFkbWluIHVzZXIgY3JlZGVudGlhbHMgdG8gb2J0YWluIGEgdG9rZW4gYW5kIGNhbGwgYWRtaW4gZW5kcG9pbnRzXG5cbnR5cGUgVG9rZW4gPSB7IGFjY2Vzc190b2tlbjogc3RyaW5nOyBleHBpcmVzX2luOiBudW1iZXIgfTtcblxuZnVuY3Rpb24gcGFyc2VJc3N1ZXIoKSB7XG4gIGNvbnN0IGlzc3VlciA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0lTU1VFUiB8fCBcIlwiOyAvLyBlLmcuLCBodHRwOi8va2V5Y2xvYWs6ODA4MC9yZWFsbXMvbXlyZWFsbVxuICBjb25zdCBtID0gaXNzdWVyLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC9bXi9dKylcXC9yZWFsbXNcXC8oW14vXSspL2kpO1xuICBpZiAoIW0pIHRocm93IG5ldyBFcnJvcihcIktFWUNMT0FLX0lTU1VFUiBpbnbDoWxpZG9cIik7XG4gIHJldHVybiB7IGJhc2U6IG1bMV0sIHJlYWxtOiBtWzJdIH07XG59XG5cbmxldCBjYWNoZWQ6IHsgdG9rZW46IHN0cmluZzsgZXhwOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBZG1pblRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICBpZiAoY2FjaGVkICYmIGNhY2hlZC5leHAgLSAzMCA+IG5vdykgcmV0dXJuIGNhY2hlZC50b2tlbjtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB1c2VybmFtZSA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0FETUlOX1VTRVIgfHwgcHJvY2Vzcy5lbnYuS0VZQ0xPQUtfQURNSU4gfHwgXCJhZG1pblwiO1xuICBjb25zdCBwYXNzd29yZCA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0FETUlOX1BBU1NXT1JEIHx8IFwiYWRtaW5cIjtcbiAgY29uc3QgdXJsID0gYCR7YmFzZX0vcmVhbG1zL21hc3Rlci9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC90b2tlbmA7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBncmFudF90eXBlOiBcInBhc3N3b3JkXCIsXG4gICAgY2xpZW50X2lkOiBcImFkbWluLWNsaVwiLFxuICAgIHVzZXJuYW1lLFxuICAgIHBhc3N3b3JkXG4gIH0pO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiB9LFxuICAgIGJvZHlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIHRva2VuIGVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIGNvbnN0IGpzb24gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgVG9rZW47XG4gIGNhY2hlZCA9IHsgdG9rZW46IGpzb24uYWNjZXNzX3Rva2VuLCBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKGpzb24uZXhwaXJlc19pbiB8fCA2MCkgfTtcbiAgcmV0dXJuIGNhY2hlZC50b2tlbjtcbn1cblxuYXN5bmMgZnVuY3Rpb24ga2M8VCA9IGFueT4obWV0aG9kOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZGF0YT86IGFueSk6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IGJhc2UgfSA9IHBhcnNlSXNzdWVyKCk7XG4gIGNvbnN0IHRva2VuID0gYXdhaXQgZ2V0QWRtaW5Ub2tlbigpO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlfSR7cGF0aH1gLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgLi4uKGRhdGEgPyB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0gOiB7fSlcbiAgICB9LFxuICAgIGJvZHk6IGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IHVuZGVmaW5lZFxuICB9KTtcbiAgaWYgKHJlcy5zdGF0dXMgPT09IDIwNCkgcmV0dXJuIHVuZGVmaW5lZCBhcyBhbnk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIGVycm9yICR7cmVzLnN0YXR1c31gKTtcbiAgY29uc3QgY3QgPSByZXMuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgfHwgXCJcIjtcbiAgaWYgKGN0LmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUO1xuICAvLyBGb3IgY3JlYXRlIGVuZHBvaW50cywgaWQgY2FuIGJlIGluIExvY2F0aW9uIGhlYWRlclxuICByZXR1cm4gdW5kZWZpbmVkIGFzIGFueTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjTGlzdEdyb3VwcygpOiBQcm9taXNlPEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PiB7XG4gIGNvbnN0IHsgcmVhbG0gfSA9IHBhcnNlSXNzdWVyKCk7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHNgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjQ3JlYXRlR3JvdXAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZX0vYWRtaW4vcmVhbG1zLyR7cmVhbG19L2dyb3Vwc2AsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lIH0pXG4gIH0pO1xuICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBLZXljbG9hayBjcmVhdGUgZ3JvdXAgJHtyZXMuc3RhdHVzfWApO1xuICBjb25zdCBsb2MgPSByZXMuaGVhZGVycy5nZXQoXCJsb2NhdGlvblwiKSB8fCBcIlwiO1xuICBjb25zdCBtID0gbG9jLm1hdGNoKC9cXC9ncm91cHNcXC8oW14vXSspJC8pO1xuICByZXR1cm4gbSA/IG1bMV0gOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY1JlbmFtZUdyb3VwKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIlBVVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHMvJHtpZH1gLCB7IG5hbWUgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0RlbGV0ZUdyb3VwKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgYXdhaXQga2MoXCJERUxFVEVcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vZ3JvdXBzLyR7aWR9YCk7XG59XG5cbmV4cG9ydCB0eXBlIEtDVXNlciA9IHsgaWQ6IHN0cmluZzsgdXNlcm5hbWU6IHN0cmluZzsgZW1haWw/OiBzdHJpbmc7IGVuYWJsZWQ6IGJvb2xlYW4gfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjTGlzdFVzZXJzKHNlYXJjaD86IHN0cmluZywgZmlyc3Q/OiBudW1iZXIsIG1heD86IG51bWJlcik6IFByb21pc2U8S0NVc2VyW10+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBpZiAoc2VhcmNoKSBwYXJhbXMuc2V0KFwic2VhcmNoXCIsIHNlYXJjaCk7XG4gIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJmaXJzdFwiLCBTdHJpbmcoZmlyc3QpKTtcbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJtYXhcIiwgU3RyaW5nKG1heCkpO1xuICBjb25zdCBxcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICBjb25zdCBxID0gcXMgPyBgPyR7cXN9YCA6IFwiXCI7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2VycyR7cX1gKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjQ3JlYXRlVXNlcihwYXJhbXM6IHsgdXNlcm5hbWU6IHN0cmluZzsgZW1haWw/OiBzdHJpbmc7IHBhc3N3b3JkPzogc3RyaW5nOyBncm91cHM/OiBzdHJpbmdbXSB9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBncm91cHMgfSA9IHBhcmFtcztcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2V9L2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vyc2AsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZSwgZW1haWwsIGVuYWJsZWQ6IHRydWUgfSlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIGNyZWF0ZSB1c2VyICR7cmVzLnN0YXR1c31gKTtcbiAgY29uc3QgbG9jID0gcmVzLmhlYWRlcnMuZ2V0KFwibG9jYXRpb25cIikgfHwgXCJcIjtcbiAgY29uc3QgbSA9IGxvYy5tYXRjaCgvXFwvdXNlcnNcXC8oW14vXSspJC8pO1xuICBjb25zdCBpZCA9IG0gPyBtWzFdIDogXCJcIjtcbiAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBvYnRlbmVyIElEIGRlIHVzdWFyaW9cIik7XG4gIGlmIChwYXNzd29yZCkge1xuICAgIGF3YWl0IGZldGNoKGAke2Jhc2V9L2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9yZXNldC1wYXNzd29yZGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwicGFzc3dvcmRcIiwgdmFsdWU6IHBhc3N3b3JkLCB0ZW1wb3Jhcnk6IGZhbHNlIH0pXG4gICAgfSk7XG4gIH1cbiAgaWYgKGdyb3VwcyAmJiBncm91cHMubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBnaWQgb2YgZ3JvdXBzKSB7XG4gICAgICBhd2FpdCBmZXRjaChgJHtiYXNlfS9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH0vZ3JvdXBzLyR7Z2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0RlbGV0ZVVzZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIkRFTEVURVwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NTZXRVc2VyUGFzc3dvcmQoaWQ6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgdGVtcG9yYXJ5ID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgYXdhaXQgZmV0Y2goYCR7YmFzZX0vYWRtaW4vcmVhbG1zLyR7cmVhbG19L3VzZXJzLyR7aWR9L3Jlc2V0LXBhc3N3b3JkYCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLCBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJwYXNzd29yZFwiLCB2YWx1ZTogcGFzc3dvcmQsIHRlbXBvcmFyeSB9KVxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjVXNlckdyb3VwcyhpZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9Pj4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICByZXR1cm4ga2MoXCJHRVRcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH0vZ3JvdXBzYCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0FkZFVzZXJUb0dyb3VwKGlkOiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIlBVVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9ncm91cHMvJHtncm91cElkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NSZW1vdmVVc2VyRnJvbUdyb3VwKGlkOiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIkRFTEVURVwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9ncm91cHMvJHtncm91cElkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NVc2Vyc0NvdW50KHNlYXJjaD86IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHsgcmVhbG0gfSA9IHBhcnNlSXNzdWVyKCk7XG4gIGNvbnN0IHEgPSBzZWFyY2ggPyBgP3NlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2gpfWAgOiBcIlwiO1xuICBjb25zdCBkYXRhID0gYXdhaXQga2M8eyBjb3VudDogbnVtYmVyIH0+KFwiR0VUXCIsIGAvYWRtaW4vcmVhbG1zLyR7cmVhbG19L3VzZXJzL2NvdW50JHtxfWApO1xuICAvLyBLZXljbG9hayByZXR1cm5zIGEgbnVtYmVyIGRpcmVjdGx5IGluIHNvbWUgdmVyc2lvbnNcbiAgaWYgKHR5cGVvZiAoZGF0YSBhcyBhbnkpID09PSBcIm51bWJlclwiKSByZXR1cm4gZGF0YSBhcyBhbnk7XG4gIHJldHVybiAoZGF0YSBhcyBhbnkpPy5jb3VudCA/PyAwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NHcm91cE1lbWJlcnMoZ3JvdXBJZDogc3RyaW5nLCBmaXJzdD86IG51bWJlciwgbWF4PzogbnVtYmVyKTogUHJvbWlzZTxLQ1VzZXJbXT4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJmaXJzdFwiLCBTdHJpbmcoZmlyc3QpKTtcbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJtYXhcIiwgU3RyaW5nKG1heCkpO1xuICBjb25zdCBxID0gcGFyYW1zLnRvU3RyaW5nKCkgPyBgPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCA6IFwiXCI7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHMvJHtncm91cElkfS9tZW1iZXJzJHtxfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NHZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICByZXR1cm4ga2MoXCJHRVRcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH1gKTtcbn1cbiJdLCJuYW1lcyI6WyJwYXJzZUlzc3VlciIsImlzc3VlciIsInByb2Nlc3MiLCJlbnYiLCJLRVlDTE9BS19JU1NVRVIiLCJtIiwibWF0Y2giLCJFcnJvciIsImJhc2UiLCJyZWFsbSIsImNhY2hlZCIsImdldEFkbWluVG9rZW4iLCJub3ciLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwiZXhwIiwidG9rZW4iLCJ1c2VybmFtZSIsIktFWUNMT0FLX0FETUlOX1VTRVIiLCJLRVlDTE9BS19BRE1JTiIsInBhc3N3b3JkIiwiS0VZQ0xPQUtfQURNSU5fUEFTU1dPUkQiLCJ1cmwiLCJib2R5IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ3JhbnRfdHlwZSIsImNsaWVudF9pZCIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwianNvbiIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJrYyIsInBhdGgiLCJkYXRhIiwiQXV0aG9yaXphdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJjdCIsImdldCIsImluY2x1ZGVzIiwia2NMaXN0R3JvdXBzIiwia2NDcmVhdGVHcm91cCIsIm5hbWUiLCJsb2MiLCJrY1JlbmFtZUdyb3VwIiwiaWQiLCJrY0RlbGV0ZUdyb3VwIiwia2NMaXN0VXNlcnMiLCJzZWFyY2giLCJmaXJzdCIsIm1heCIsInBhcmFtcyIsInNldCIsIlN0cmluZyIsInFzIiwidG9TdHJpbmciLCJxIiwia2NDcmVhdGVVc2VyIiwiZW1haWwiLCJncm91cHMiLCJlbmFibGVkIiwidHlwZSIsInZhbHVlIiwidGVtcG9yYXJ5IiwibGVuZ3RoIiwiZ2lkIiwia2NEZWxldGVVc2VyIiwia2NTZXRVc2VyUGFzc3dvcmQiLCJrY1VzZXJHcm91cHMiLCJrY0FkZFVzZXJUb0dyb3VwIiwiZ3JvdXBJZCIsImtjUmVtb3ZlVXNlckZyb21Hcm91cCIsImtjVXNlcnNDb3VudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvdW50Iiwia2NHcm91cE1lbWJlcnMiLCJrY0dldFVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/keycloak.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Flabel%2Froute&page=%2Fapi%2Fprofile%2Flabel%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Flabel%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();