"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/keys/route";
exports.ids = ["app/api/admin/keys/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "./action-async-storage.external?8dda":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?3d59":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?16bc":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fkeys%2Froute&page=%2Fapi%2Fadmin%2Fkeys%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fkeys%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fkeys%2Froute&page=%2Fapi%2Fadmin%2Fkeys%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fkeys%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_src_app_api_admin_keys_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/keys/route.ts */ \"(rsc)/./src/app/api/admin/keys/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/keys/route\",\n        pathname: \"/api/admin/keys\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/keys/route\"\n    },\n    resolvedPagePath: \"/app/src/app/api/admin/keys/route.ts\",\n    nextConfigOutput,\n    userland: _app_src_app_api_admin_keys_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/keys/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmtleXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGa2V5cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFkbWluJTJGa2V5cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDWjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2h5LW5leHQtZGFzaGJvYXJkLz8zYzFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9hcHAvc3JjL2FwcC9hcGkvYWRtaW4va2V5cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4va2V5cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2tleXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL2tleXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvYXBwL3NyYy9hcHAvYXBpL2FkbWluL2tleXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL2tleXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fkeys%2Froute&page=%2Fapi%2Fadmin%2Fkeys%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fkeys%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/keys/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/admin/keys/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_server_persist__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/server/persist */ \"(rsc)/./src/lib/server/persist.ts\");\n/* harmony import */ var _lib_server_auth_extra__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/server/auth-extra */ \"(rsc)/./src/lib/server/auth-extra.ts\");\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nasync function GET(req) {\n    if (!(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authEnabled)()) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([], {\n        status: 200\n    });\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n    const groups = await (0,_lib_server_auth_extra__WEBPACK_IMPORTED_MODULE_4__.getUserGroups)(req);\n    if (!session || !(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.isAdminGroup)(groups)) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Forbidden\"\n    }, {\n        status: 403\n    });\n    const keys = await (0,_lib_server_persist__WEBPACK_IMPORTED_MODULE_3__.listKeys)();\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(keys, {\n        headers: {\n            \"Cache-Control\": \"no-store\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi9rZXlzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNoQjtBQUN1QjtBQUNwQjtBQUNRO0FBRWpELE1BQU1PLFVBQVUsU0FBUztBQUN6QixNQUFNQyxVQUFVLGdCQUFnQjtBQUVoQyxlQUFlQyxJQUFJQyxHQUFnQjtJQUN4QyxJQUFJLENBQUNQLHNEQUFXQSxJQUFJLE9BQU9ILHFEQUFZQSxDQUFDVyxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQUVDLFFBQVE7SUFBSTtJQUMvRCxNQUFNQyxVQUFVLE1BQU1aLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO0lBQ2xELE1BQU1ZLFNBQVMsTUFBTVIscUVBQWFBLENBQUNJO0lBQ25DLElBQUksQ0FBQ0csV0FBVyxDQUFDVCx1REFBWUEsQ0FBQ1UsU0FBUyxPQUFPZCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1FBQUVJLE9BQU87SUFBWSxHQUFHO1FBQUVILFFBQVE7SUFBSTtJQUN0RyxNQUFNSSxPQUFPLE1BQU1YLDZEQUFRQTtJQUMzQixPQUFPTCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDSyxNQUFNO1FBQUVDLFNBQVM7WUFBRSxpQkFBaUI7UUFBVztJQUFFO0FBQzVFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGFzaHktbmV4dC1kYXNoYm9hcmQvLi9zcmMvYXBwL2FwaS9hZG1pbi9rZXlzL3JvdXRlLnRzP2U3N2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlLCB0eXBlIE5leHRSZXF1ZXN0IH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMsIGF1dGhFbmFibGVkLCBpc0FkbWluR3JvdXAgfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xuaW1wb3J0IHsgbGlzdEtleXMgfSBmcm9tIFwiQC9saWIvc2VydmVyL3BlcnNpc3RcIjtcbmltcG9ydCB7IGdldFVzZXJHcm91cHMgfSBmcm9tIFwiQC9saWIvc2VydmVyL2F1dGgtZXh0cmFcIjtcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGlmICghYXV0aEVuYWJsZWQoKSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdLCB7IHN0YXR1czogMjAwIH0pO1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gIGNvbnN0IGdyb3VwcyA9IGF3YWl0IGdldFVzZXJHcm91cHMocmVxKTtcbiAgaWYgKCFzZXNzaW9uIHx8ICFpc0FkbWluR3JvdXAoZ3JvdXBzKSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRm9yYmlkZGVuXCIgfSwgeyBzdGF0dXM6IDQwMyB9KTtcbiAgY29uc3Qga2V5cyA9IGF3YWl0IGxpc3RLZXlzKCk7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihrZXlzLCB7IGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImF1dGhFbmFibGVkIiwiaXNBZG1pbkdyb3VwIiwibGlzdEtleXMiLCJnZXRVc2VyR3JvdXBzIiwicnVudGltZSIsImR5bmFtaWMiLCJHRVQiLCJyZXEiLCJqc29uIiwic3RhdHVzIiwic2Vzc2lvbiIsImdyb3VwcyIsImVycm9yIiwia2V5cyIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/keys/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth-util.ts":
/*!******************************!*\
  !*** ./src/lib/auth-util.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAdminGroup: () => (/* binding */ isAdminGroup)\n/* harmony export */ });\nfunction isAdminGroup(groups) {\n    const admin = (process.env.ADMIN_GROUP || \"devops\" || 0).toLowerCase();\n    return !!groups?.some((g)=>{\n        const s = String(g).toLowerCase();\n        if (s === admin) return true;\n        if (s.startsWith(\"/\")) {\n            const parts = s.split(\"/\").filter(Boolean);\n            return parts.includes(admin);\n        }\n        return false;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgtdXRpbC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EsYUFBYUMsTUFBaUI7SUFDNUMsTUFBTUMsUUFBUSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSUYsUUFBbUMsSUFBSSxDQUFPLEVBQUdJLFdBQVc7SUFDdEcsT0FBTyxDQUFDLENBQUNOLFFBQVFPLEtBQUtDLENBQUFBO1FBQ3BCLE1BQU1DLElBQUlDLE9BQU9GLEdBQUdGLFdBQVc7UUFDL0IsSUFBSUcsTUFBTVIsT0FBTyxPQUFPO1FBQ3hCLElBQUlRLEVBQUVFLFVBQVUsQ0FBQyxNQUFNO1lBQ3JCLE1BQU1DLFFBQVFILEVBQUVJLEtBQUssQ0FBQyxLQUFLQyxNQUFNLENBQUNDO1lBQ2xDLE9BQU9ILE1BQU1JLFFBQVEsQ0FBQ2Y7UUFDeEI7UUFDQSxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2h5LW5leHQtZGFzaGJvYXJkLy4vc3JjL2xpYi9hdXRoLXV0aWwudHM/YjI4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNBZG1pbkdyb3VwKGdyb3Vwcz86IHN0cmluZ1tdKSB7XG4gIGNvbnN0IGFkbWluID0gKHByb2Nlc3MuZW52LkFETUlOX0dST1VQIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FETUlOX0dST1VQIHx8IFwiZGV2b3BzXCIpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAhIWdyb3Vwcz8uc29tZShnID0+IHtcbiAgICBjb25zdCBzID0gU3RyaW5nKGcpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHMgPT09IGFkbWluKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAocy5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgY29uc3QgcGFydHMgPSBzLnNwbGl0KFwiL1wiKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICByZXR1cm4gcGFydHMuaW5jbHVkZXMoYWRtaW4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG4iXSwibmFtZXMiOlsiaXNBZG1pbkdyb3VwIiwiZ3JvdXBzIiwiYWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiQURNSU5fR1JPVVAiLCJORVhUX1BVQkxJQ19BRE1JTl9HUk9VUCIsInRvTG93ZXJDYXNlIiwic29tZSIsImciLCJzIiwiU3RyaW5nIiwic3RhcnRzV2l0aCIsInBhcnRzIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth-util.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authEnabled: () => (/* binding */ authEnabled),\n/* harmony export */   authHandlers: () => (/* binding */ authHandlers),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   isAdminGroup: () => (/* reexport safe */ _lib_auth_util__WEBPACK_IMPORTED_MODULE_3__.isAdminGroup)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_keycloak__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/keycloak */ \"(rsc)/./node_modules/next-auth/providers/keycloak.js\");\n/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jwt-decode */ \"(rsc)/./node_modules/jwt-decode/build/esm/index.js\");\n/* harmony import */ var _lib_auth_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth-util */ \"(rsc)/./src/lib/auth-util.ts\");\n\n\n\n\nfunction getProviders() {\n    const { KEYCLOAK_ISSUER, KEYCLOAK_CLIENT_ID, KEYCLOAK_CLIENT_SECRET } = process.env;\n    if (!KEYCLOAK_ISSUER || !KEYCLOAK_CLIENT_ID || !KEYCLOAK_CLIENT_SECRET) return [];\n    return [\n        (0,next_auth_providers_keycloak__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: KEYCLOAK_CLIENT_ID,\n            clientSecret: KEYCLOAK_CLIENT_SECRET,\n            issuer: KEYCLOAK_ISSUER\n        })\n    ];\n}\nconst authEnabled = ()=>getProviders().length > 0;\nconst authOptions = {\n    providers: getProviders(),\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    callbacks: {\n        async jwt ({ token, account }) {\n            // On first sign-in, enrich token with groups from id/access token\n            if (account && account.id_token) {\n                try {\n                    const decoded = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_2__.jwtDecode)(account.id_token);\n                    const groups = decoded.groups || decoded[\"realm_access\"]?.roles || [];\n                    if (Array.isArray(groups)) token.groups = groups;\n                } catch  {\n                // ignore\n                }\n            } else if (account && account.access_token) {\n                try {\n                    const decoded = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_2__.jwtDecode)(account.access_token);\n                    const groups = decoded.groups || decoded[\"realm_access\"]?.roles || [];\n                    if (Array.isArray(groups)) token.groups = groups;\n                } catch  {}\n            }\n            // Persist access token for server-side probes (userinfo)\n            if (account && account.access_token) {\n                token.accessToken = account.access_token;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            session.sub = token.sub;\n            session.groups = token.groups || [];\n            session.accessToken = token.accessToken;\n            return session;\n        }\n    }\n};\nconst { handlers: authHandlers } = next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions); // isAdminGroup re-exported from auth-util for server modules\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ0M7QUFDckI7QUFDUTtBQVUvQyxTQUFTSTtJQUNQLE1BQU0sRUFBRUMsZUFBZSxFQUFFQyxrQkFBa0IsRUFBRUMsc0JBQXNCLEVBQUUsR0FBR0MsUUFBUUMsR0FBRztJQUNuRixJQUFJLENBQUNKLG1CQUFtQixDQUFDQyxzQkFBc0IsQ0FBQ0Msd0JBQXdCLE9BQU8sRUFBRTtJQUNqRixPQUFPO1FBQ0xOLHdFQUFnQkEsQ0FBQztZQUNmUyxVQUFVSjtZQUNWSyxjQUFjSjtZQUNkSyxRQUFRUDtRQUVWO0tBQ0Q7QUFDSDtBQUVPLE1BQU1RLGNBQWMsSUFBTVQsZUFBZVUsTUFBTSxHQUFHLEVBQUU7QUFFcEQsTUFBTUMsY0FBK0I7SUFDMUNDLFdBQVdaO0lBQ1hhLFNBQVM7UUFBRUMsVUFBVTtJQUFNO0lBQzNCQyxRQUFRWCxRQUFRQyxHQUFHLENBQUNXLGVBQWU7SUFDbkNDLFdBQVc7UUFDVCxNQUFNQyxLQUFJLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFO1lBQzFCLGtFQUFrRTtZQUNsRSxJQUFJQSxXQUFXLFFBQWlCQyxRQUFRLEVBQUU7Z0JBQ3hDLElBQUk7b0JBQ0YsTUFBTUMsVUFBZXhCLHFEQUFTQSxDQUFDLFFBQWlCdUIsUUFBUTtvQkFDeEQsTUFBTUUsU0FBbUJELFFBQVFDLE1BQU0sSUFBSUQsT0FBTyxDQUFDLGVBQWUsRUFBRUUsU0FBUyxFQUFFO29CQUMvRSxJQUFJQyxNQUFNQyxPQUFPLENBQUNILFNBQVMsTUFBZUEsTUFBTSxHQUFHQTtnQkFDckQsRUFBRSxPQUFNO2dCQUNOLFNBQVM7Z0JBQ1g7WUFDRixPQUFPLElBQUlILFdBQVcsUUFBaUJPLFlBQVksRUFBRTtnQkFDbkQsSUFBSTtvQkFDRixNQUFNTCxVQUFleEIscURBQVNBLENBQUMsUUFBaUI2QixZQUFZO29CQUM1RCxNQUFNSixTQUFtQkQsUUFBUUMsTUFBTSxJQUFJRCxPQUFPLENBQUMsZUFBZSxFQUFFRSxTQUFTLEVBQUU7b0JBQy9FLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0gsU0FBUyxNQUFlQSxNQUFNLEdBQUdBO2dCQUNyRCxFQUFFLE9BQU0sQ0FBQztZQUNYO1lBQ0EseURBQXlEO1lBQ3pELElBQUlILFdBQVcsUUFBaUJPLFlBQVksRUFBRTtnQkFDM0NSLE1BQWNTLFdBQVcsR0FBRyxRQUFpQkQsWUFBWTtZQUM1RDtZQUNBLE9BQU9SO1FBQ1Q7UUFDQSxNQUFNTixTQUFRLEVBQUVBLE9BQU8sRUFBRU0sS0FBSyxFQUFFO1lBQzdCTixRQUFnQmdCLEdBQUcsR0FBR1YsTUFBTVUsR0FBRztZQUMvQmhCLFFBQWdCVSxNQUFNLEdBQUcsTUFBZUEsTUFBTSxJQUFJLEVBQUU7WUFDcERWLFFBQWdCZSxXQUFXLEdBQUcsTUFBZUEsV0FBVztZQUN6RCxPQUFPZjtRQUNUO0lBQ0Y7QUFDRixFQUFFO0FBRUssTUFBTSxFQUFFaUIsVUFBVUMsWUFBWSxFQUFFLEdBQUduQyxnREFBUUEsQ0FBQ2UsYUFBYSxDQUVoRSw2REFBNkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXNoeS1uZXh0LWRhc2hib2FyZC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCwgeyB0eXBlIE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCBLZXljbG9ha1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2tleWNsb2FrXCI7XG5pbXBvcnQgeyBqd3REZWNvZGUgfSBmcm9tIFwiand0LWRlY29kZVwiO1xuZXhwb3J0IHsgaXNBZG1pbkdyb3VwIH0gZnJvbSBcIkAvbGliL2F1dGgtdXRpbFwiO1xuXG5leHBvcnQgdHlwZSBNZSA9IHtcbiAgYXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAgc3ViPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICBncm91cHM/OiBzdHJpbmdbXTtcbn07XG5cbmZ1bmN0aW9uIGdldFByb3ZpZGVycygpIHtcbiAgY29uc3QgeyBLRVlDTE9BS19JU1NVRVIsIEtFWUNMT0FLX0NMSUVOVF9JRCwgS0VZQ0xPQUtfQ0xJRU5UX1NFQ1JFVCB9ID0gcHJvY2Vzcy5lbnY7XG4gIGlmICghS0VZQ0xPQUtfSVNTVUVSIHx8ICFLRVlDTE9BS19DTElFTlRfSUQgfHwgIUtFWUNMT0FLX0NMSUVOVF9TRUNSRVQpIHJldHVybiBbXTtcbiAgcmV0dXJuIFtcbiAgICBLZXljbG9ha1Byb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBLRVlDTE9BS19DTElFTlRfSUQsXG4gICAgICBjbGllbnRTZWNyZXQ6IEtFWUNMT0FLX0NMSUVOVF9TRUNSRVQsXG4gICAgICBpc3N1ZXI6IEtFWUNMT0FLX0lTU1VFUlxuICAgICAgLy8gRG8gbm90IG92ZXJyaWRlIHNjb3BlOyByZWx5IG9uIGRlZmF1bHQgY2xpZW50IHNjb3BlcyBhbmQgc2VydmVyIGZhbGxiYWNrc1xuICAgIH0pLFxuICBdO1xufVxuXG5leHBvcnQgY29uc3QgYXV0aEVuYWJsZWQgPSAoKSA9PiBnZXRQcm92aWRlcnMoKS5sZW5ndGggPiAwO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBnZXRQcm92aWRlcnMoKSxcbiAgc2Vzc2lvbjogeyBzdHJhdGVneTogXCJqd3RcIiB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIGFjY291bnQgfSkge1xuICAgICAgLy8gT24gZmlyc3Qgc2lnbi1pbiwgZW5yaWNoIHRva2VuIHdpdGggZ3JvdXBzIGZyb20gaWQvYWNjZXNzIHRva2VuXG4gICAgICBpZiAoYWNjb3VudCAmJiAoYWNjb3VudCBhcyBhbnkpLmlkX3Rva2VuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGVjb2RlZDogYW55ID0gand0RGVjb2RlKChhY2NvdW50IGFzIGFueSkuaWRfdG9rZW4pO1xuICAgICAgICAgIGNvbnN0IGdyb3Vwczogc3RyaW5nW10gPSBkZWNvZGVkLmdyb3VwcyB8fCBkZWNvZGVkW1wicmVhbG1fYWNjZXNzXCJdPy5yb2xlcyB8fCBbXTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncm91cHMpKSAodG9rZW4gYXMgYW55KS5ncm91cHMgPSBncm91cHM7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFjY291bnQgJiYgKGFjY291bnQgYXMgYW55KS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkZWNvZGVkOiBhbnkgPSBqd3REZWNvZGUoKGFjY291bnQgYXMgYW55KS5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgIGNvbnN0IGdyb3Vwczogc3RyaW5nW10gPSBkZWNvZGVkLmdyb3VwcyB8fCBkZWNvZGVkW1wicmVhbG1fYWNjZXNzXCJdPy5yb2xlcyB8fCBbXTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncm91cHMpKSAodG9rZW4gYXMgYW55KS5ncm91cHMgPSBncm91cHM7XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgIH1cbiAgICAgIC8vIFBlcnNpc3QgYWNjZXNzIHRva2VuIGZvciBzZXJ2ZXItc2lkZSBwcm9iZXMgKHVzZXJpbmZvKVxuICAgICAgaWYgKGFjY291bnQgJiYgKGFjY291bnQgYXMgYW55KS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgKHRva2VuIGFzIGFueSkuYWNjZXNzVG9rZW4gPSAoYWNjb3VudCBhcyBhbnkpLmFjY2Vzc190b2tlbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICAoc2Vzc2lvbiBhcyBhbnkpLnN1YiA9IHRva2VuLnN1YjtcbiAgICAgIChzZXNzaW9uIGFzIGFueSkuZ3JvdXBzID0gKHRva2VuIGFzIGFueSkuZ3JvdXBzIHx8IFtdO1xuICAgICAgKHNlc3Npb24gYXMgYW55KS5hY2Nlc3NUb2tlbiA9ICh0b2tlbiBhcyBhbnkpLmFjY2Vzc1Rva2VuO1xuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCB7IGhhbmRsZXJzOiBhdXRoSGFuZGxlcnMgfSA9IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcblxuLy8gaXNBZG1pbkdyb3VwIHJlLWV4cG9ydGVkIGZyb20gYXV0aC11dGlsIGZvciBzZXJ2ZXIgbW9kdWxlc1xuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiS2V5Y2xvYWtQcm92aWRlciIsImp3dERlY29kZSIsImlzQWRtaW5Hcm91cCIsImdldFByb3ZpZGVycyIsIktFWUNMT0FLX0lTU1VFUiIsIktFWUNMT0FLX0NMSUVOVF9JRCIsIktFWUNMT0FLX0NMSUVOVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJpc3N1ZXIiLCJhdXRoRW5hYmxlZCIsImxlbmd0aCIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwic2Vzc2lvbiIsInN0cmF0ZWd5Iiwic2VjcmV0IiwiTkVYVEFVVEhfU0VDUkVUIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJhY2NvdW50IiwiaWRfdG9rZW4iLCJkZWNvZGVkIiwiZ3JvdXBzIiwicm9sZXMiLCJBcnJheSIsImlzQXJyYXkiLCJhY2Nlc3NfdG9rZW4iLCJhY2Nlc3NUb2tlbiIsInN1YiIsImhhbmRsZXJzIiwiYXV0aEhhbmRsZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server/auth-extra.ts":
/*!**************************************!*\
  !*** ./src/lib/server/auth-extra.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserGroups: () => (/* binding */ getUserGroups)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(rsc)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_server_keycloak__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/server/keycloak */ \"(rsc)/./src/lib/server/keycloak.ts\");\n\n\n\n\nasync function getUserGroups(req) {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n    const sub = session?.sub;\n    let groups = session?.groups || [];\n    if ((!groups || groups.length === 0) && process.env.KEYCLOAK_ISSUER) {\n        try {\n            const jwt = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n                req,\n                secret: process.env.NEXTAUTH_SECRET\n            });\n            const access = jwt?.accessToken;\n            if (access) {\n                const url = `${process.env.KEYCLOAK_ISSUER}/protocol/openid-connect/userinfo`;\n                const r = await fetch(url, {\n                    headers: {\n                        Authorization: `Bearer ${access}`\n                    }\n                });\n                if (r.ok) {\n                    const ui = await r.json();\n                    if (Array.isArray(ui.groups)) groups = ui.groups;\n                }\n            }\n        } catch  {}\n    }\n    // Final fallback: query admin API for user's groups by subject id\n    if ((!groups || groups.length === 0) && sub) {\n        try {\n            const g = await (0,_lib_server_keycloak__WEBPACK_IMPORTED_MODULE_3__.kcUserGroups)(sub);\n            groups = g.map((x)=>`/${x.name}`);\n        } catch  {}\n    }\n    return groups || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlci9hdXRoLWV4dHJhLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDNkM7QUFDSjtBQUNBO0FBQ1k7QUFFOUMsZUFBZUksY0FBY0MsR0FBZ0I7SUFDbEQsTUFBTUMsVUFBVSxNQUFNTiwyREFBZ0JBLENBQUNFLGtEQUFXQTtJQUNsRCxNQUFNSyxNQUFPRCxTQUFpQkM7SUFDOUIsSUFBSUMsU0FBUyxTQUFtQkEsVUFBbUMsRUFBRTtJQUNyRSxJQUFJLENBQUMsQ0FBQ0EsVUFBVUEsT0FBT0MsTUFBTSxLQUFLLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxFQUFFO1FBQ25FLElBQUk7WUFDRixNQUFNQyxNQUFNLE1BQU1aLHVEQUFRQSxDQUFDO2dCQUFFSTtnQkFBS1MsUUFBUUosUUFBUUMsR0FBRyxDQUFDSSxlQUFlO1lBQUM7WUFDdEUsTUFBTUMsU0FBVUgsS0FBYUk7WUFDN0IsSUFBSUQsUUFBUTtnQkFDVixNQUFNRSxNQUFNLENBQUMsRUFBRVIsUUFBUUMsR0FBRyxDQUFDQyxlQUFlLENBQUMsaUNBQWlDLENBQUM7Z0JBQzdFLE1BQU1PLElBQUksTUFBTUMsTUFBTUYsS0FBSztvQkFBRUcsU0FBUzt3QkFBRUMsZUFBZSxDQUFDLE9BQU8sRUFBRU4sT0FBTyxDQUFDO29CQUFDO2dCQUFFO2dCQUM1RSxJQUFJRyxFQUFFSSxFQUFFLEVBQUU7b0JBQ1IsTUFBTUMsS0FBSyxNQUFNTCxFQUFFTSxJQUFJO29CQUN2QixJQUFJQyxNQUFNQyxPQUFPLENBQUNILEdBQUdoQixNQUFNLEdBQUdBLFNBQVNnQixHQUFHaEIsTUFBTTtnQkFDbEQ7WUFDRjtRQUNGLEVBQUUsT0FBTSxDQUFDO0lBQ1g7SUFDQSxrRUFBa0U7SUFDbEUsSUFBSSxDQUFDLENBQUNBLFVBQVVBLE9BQU9DLE1BQU0sS0FBSyxNQUFNRixLQUFLO1FBQzNDLElBQUk7WUFDRixNQUFNcUIsSUFBSSxNQUFNekIsa0VBQVlBLENBQUNJO1lBQzdCQyxTQUFTb0IsRUFBRUMsR0FBRyxDQUFDQyxDQUFBQSxJQUFLLENBQUMsQ0FBQyxFQUFFQSxFQUFFQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxFQUFFLE9BQU0sQ0FBQztJQUNYO0lBQ0EsT0FBT3ZCLFVBQVUsRUFBRTtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2h5LW5leHQtZGFzaGJvYXJkLy4vc3JjL2xpYi9zZXJ2ZXIvYXV0aC1leHRyYS50cz8xOWU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tIFwibmV4dC1hdXRoL2p3dFwiO1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xuaW1wb3J0IHsga2NVc2VyR3JvdXBzIH0gZnJvbSBcIkAvbGliL3NlcnZlci9rZXljbG9ha1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckdyb3VwcyhyZXE6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gIGNvbnN0IHN1YiA9IChzZXNzaW9uIGFzIGFueSk/LnN1YiBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGxldCBncm91cHMgPSAoKHNlc3Npb24gYXMgYW55KT8uZ3JvdXBzIGFzIHN0cmluZ1tdIHwgdW5kZWZpbmVkKSB8fCBbXTtcbiAgaWYgKCghZ3JvdXBzIHx8IGdyb3Vwcy5sZW5ndGggPT09IDApICYmIHByb2Nlc3MuZW52LktFWUNMT0FLX0lTU1VFUikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqd3QgPSBhd2FpdCBnZXRUb2tlbih7IHJlcSwgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfSk7XG4gICAgICBjb25zdCBhY2Nlc3MgPSAoand0IGFzIGFueSk/LmFjY2Vzc1Rva2VuIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGlmIChhY2Nlc3MpIHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7cHJvY2Vzcy5lbnYuS0VZQ0xPQUtfSVNTVUVSfS9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC91c2VyaW5mb2A7XG4gICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCh1cmwsIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzfWAgfSB9KTtcbiAgICAgICAgaWYgKHIub2spIHtcbiAgICAgICAgICBjb25zdCB1aSA9IGF3YWl0IHIuanNvbigpO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHVpLmdyb3VwcykpIGdyb3VwcyA9IHVpLmdyb3VwcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2gge31cbiAgfVxuICAvLyBGaW5hbCBmYWxsYmFjazogcXVlcnkgYWRtaW4gQVBJIGZvciB1c2VyJ3MgZ3JvdXBzIGJ5IHN1YmplY3QgaWRcbiAgaWYgKCghZ3JvdXBzIHx8IGdyb3Vwcy5sZW5ndGggPT09IDApICYmIHN1Yikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBnID0gYXdhaXQga2NVc2VyR3JvdXBzKHN1Yik7XG4gICAgICBncm91cHMgPSBnLm1hcCh4ID0+IGAvJHt4Lm5hbWV9YCk7XG4gICAgfSBjYXRjaCB7fVxuICB9XG4gIHJldHVybiBncm91cHMgfHwgW107XG59XG4iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFRva2VuIiwiYXV0aE9wdGlvbnMiLCJrY1VzZXJHcm91cHMiLCJnZXRVc2VyR3JvdXBzIiwicmVxIiwic2Vzc2lvbiIsInN1YiIsImdyb3VwcyIsImxlbmd0aCIsInByb2Nlc3MiLCJlbnYiLCJLRVlDTE9BS19JU1NVRVIiLCJqd3QiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJhY2Nlc3MiLCJhY2Nlc3NUb2tlbiIsInVybCIsInIiLCJmZXRjaCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwib2siLCJ1aSIsImpzb24iLCJBcnJheSIsImlzQXJyYXkiLCJnIiwibWFwIiwieCIsIm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/auth-extra.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server/keycloak.ts":
/*!************************************!*\
  !*** ./src/lib/server/keycloak.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kcAddUserToGroup: () => (/* binding */ kcAddUserToGroup),\n/* harmony export */   kcCreateGroup: () => (/* binding */ kcCreateGroup),\n/* harmony export */   kcCreateUser: () => (/* binding */ kcCreateUser),\n/* harmony export */   kcDeleteGroup: () => (/* binding */ kcDeleteGroup),\n/* harmony export */   kcDeleteUser: () => (/* binding */ kcDeleteUser),\n/* harmony export */   kcGetUser: () => (/* binding */ kcGetUser),\n/* harmony export */   kcGroupMembers: () => (/* binding */ kcGroupMembers),\n/* harmony export */   kcListGroups: () => (/* binding */ kcListGroups),\n/* harmony export */   kcListUsers: () => (/* binding */ kcListUsers),\n/* harmony export */   kcRemoveUserFromGroup: () => (/* binding */ kcRemoveUserFromGroup),\n/* harmony export */   kcRenameGroup: () => (/* binding */ kcRenameGroup),\n/* harmony export */   kcSetUserPassword: () => (/* binding */ kcSetUserPassword),\n/* harmony export */   kcUserGroups: () => (/* binding */ kcUserGroups),\n/* harmony export */   kcUsersCount: () => (/* binding */ kcUsersCount)\n/* harmony export */ });\n// Keycloak Admin REST helpers\n// Uses admin user credentials to obtain a token and call admin endpoints\nfunction parseIssuer() {\n    const issuer = process.env.KEYCLOAK_ISSUER || \"\"; // e.g., http://keycloak:8080/realms/myrealm\n    const m = issuer.match(/^(https?:\\/\\/[^/]+)\\/realms\\/([^/]+)/i);\n    if (!m) throw new Error(\"KEYCLOAK_ISSUER inv\\xe1lido\");\n    return {\n        base: m[1],\n        realm: m[2]\n    };\n}\nlet cached = null;\nasync function getAdminToken() {\n    const now = Math.floor(Date.now() / 1000);\n    if (cached && cached.exp - 30 > now) return cached.token;\n    const { base } = parseIssuer();\n    const username = process.env.KEYCLOAK_ADMIN_USER || process.env.KEYCLOAK_ADMIN || \"admin\";\n    const password = process.env.KEYCLOAK_ADMIN_PASSWORD || \"admin\";\n    const url = `${base}/realms/master/protocol/openid-connect/token`;\n    const body = new URLSearchParams({\n        grant_type: \"password\",\n        client_id: \"admin-cli\",\n        username,\n        password\n    });\n    const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n        },\n        body\n    });\n    if (!res.ok) throw new Error(`Keycloak token error: ${res.status}`);\n    const json = await res.json();\n    cached = {\n        token: json.access_token,\n        exp: Math.floor(Date.now() / 1000) + (json.expires_in || 60)\n    };\n    return cached.token;\n}\nasync function kc(method, path, data) {\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    const res = await fetch(`${base}${path}`, {\n        method,\n        headers: {\n            Authorization: `Bearer ${token}`,\n            ...data ? {\n                \"content-type\": \"application/json\"\n            } : {}\n        },\n        body: data ? JSON.stringify(data) : undefined\n    });\n    if (res.status === 204) return undefined;\n    if (!res.ok) throw new Error(`Keycloak error ${res.status}`);\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (ct.includes(\"application/json\")) return await res.json();\n    // For create endpoints, id can be in Location header\n    return undefined;\n}\nasync function kcListGroups() {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/groups`);\n}\nasync function kcCreateGroup(name) {\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    const res = await fetch(`${base}/admin/realms/${realm}/groups`, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            name\n        })\n    });\n    if (!res.ok) throw new Error(`Keycloak create group ${res.status}`);\n    const loc = res.headers.get(\"location\") || \"\";\n    const m = loc.match(/\\/groups\\/([^/]+)$/);\n    return m ? m[1] : undefined;\n}\nasync function kcRenameGroup(id, name) {\n    const { realm } = parseIssuer();\n    await kc(\"PUT\", `/admin/realms/${realm}/groups/${id}`, {\n        name\n    });\n}\nasync function kcDeleteGroup(id) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/groups/${id}`);\n}\nasync function kcListUsers(search, first, max) {\n    const { realm } = parseIssuer();\n    const params = new URLSearchParams();\n    if (search) params.set(\"search\", search);\n    if (typeof first === \"number\") params.set(\"first\", String(first));\n    if (typeof max === \"number\") params.set(\"max\", String(max));\n    const qs = params.toString();\n    const q = qs ? `?${qs}` : \"\";\n    return kc(\"GET\", `/admin/realms/${realm}/users${q}`);\n}\nasync function kcCreateUser(params) {\n    const { username, email, password, groups } = params;\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    let res = await fetch(`${base}/admin/realms/${realm}/users`, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            username,\n            email,\n            enabled: true\n        })\n    });\n    if (!res.ok) throw new Error(`Keycloak create user ${res.status}`);\n    const loc = res.headers.get(\"location\") || \"\";\n    const m = loc.match(/\\/users\\/([^/]+)$/);\n    const id = m ? m[1] : \"\";\n    if (!id) throw new Error(\"No se pudo obtener ID de usuario\");\n    if (password) {\n        await fetch(`${base}/admin/realms/${realm}/users/${id}/reset-password`, {\n            method: \"PUT\",\n            headers: {\n                Authorization: `Bearer ${token}`,\n                \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                type: \"password\",\n                value: password,\n                temporary: false\n            })\n        });\n    }\n    if (groups && groups.length) {\n        for (const gid of groups){\n            await fetch(`${base}/admin/realms/${realm}/users/${id}/groups/${gid}`, {\n                method: \"PUT\",\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            });\n        }\n    }\n    return id;\n}\nasync function kcDeleteUser(id) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/users/${id}`);\n}\nasync function kcSetUserPassword(id, password, temporary = false) {\n    const { realm } = parseIssuer();\n    const { base } = parseIssuer();\n    const token = await getAdminToken();\n    await fetch(`${base}/admin/realms/${realm}/users/${id}/reset-password`, {\n        method: \"PUT\",\n        headers: {\n            Authorization: `Bearer ${token}`,\n            \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            type: \"password\",\n            value: password,\n            temporary\n        })\n    });\n}\nasync function kcUserGroups(id) {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/users/${id}/groups`);\n}\nasync function kcAddUserToGroup(id, groupId) {\n    const { realm } = parseIssuer();\n    await kc(\"PUT\", `/admin/realms/${realm}/users/${id}/groups/${groupId}`);\n}\nasync function kcRemoveUserFromGroup(id, groupId) {\n    const { realm } = parseIssuer();\n    await kc(\"DELETE\", `/admin/realms/${realm}/users/${id}/groups/${groupId}`);\n}\nasync function kcUsersCount(search) {\n    const { realm } = parseIssuer();\n    const q = search ? `?search=${encodeURIComponent(search)}` : \"\";\n    const data = await kc(\"GET\", `/admin/realms/${realm}/users/count${q}`);\n    // Keycloak returns a number directly in some versions\n    if (typeof data === \"number\") return data;\n    return data?.count ?? 0;\n}\nasync function kcGroupMembers(groupId, first, max) {\n    const { realm } = parseIssuer();\n    const params = new URLSearchParams();\n    if (typeof first === \"number\") params.set(\"first\", String(first));\n    if (typeof max === \"number\") params.set(\"max\", String(max));\n    const q = params.toString() ? `?${params.toString()}` : \"\";\n    return kc(\"GET\", `/admin/realms/${realm}/groups/${groupId}/members${q}`);\n}\nasync function kcGetUser(id) {\n    const { realm } = parseIssuer();\n    return kc(\"GET\", `/admin/realms/${realm}/users/${id}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sWUFBWSxFQUFFc0QsRUFBRSxDQUFDO0lBQ3hGLHNEQUFzRDtJQUN0RCxJQUFJLE9BQVF4QixTQUFpQixVQUFVLE9BQU9BO0lBQzlDLE9BQU8sTUFBZTBDLFNBQVM7QUFDakM7QUFFTyxlQUFlQyxlQUFlTCxPQUFlLEVBQUVyQixLQUFjLEVBQUVDLEdBQVk7SUFDaEYsTUFBTSxFQUFFaEQsS0FBSyxFQUFFLEdBQUdUO0lBQ2xCLE1BQU0wRCxTQUFTLElBQUlqQztJQUNuQixJQUFJLE9BQU8rQixVQUFVLFVBQVVFLE9BQU9DLEdBQUcsQ0FBQyxTQUFTQyxPQUFPSjtJQUMxRCxJQUFJLE9BQU9DLFFBQVEsVUFBVUMsT0FBT0MsR0FBRyxDQUFDLE9BQU9DLE9BQU9IO0lBQ3RELE1BQU1NLElBQUlMLE9BQU9JLFFBQVEsS0FBSyxDQUFDLENBQUMsRUFBRUosT0FBT0ksUUFBUSxHQUFHLENBQUMsR0FBRztJQUN4RCxPQUFPekIsR0FBRyxPQUFPLENBQUMsY0FBYyxFQUFFNUIsTUFBTSxRQUFRLEVBQUVvRSxRQUFRLFFBQVEsRUFBRWQsRUFBRSxDQUFDO0FBQ3pFO0FBRU8sZUFBZW9CLFVBQVUvQixFQUFVO0lBQ3hDLE1BQU0sRUFBRTNDLEtBQUssRUFBRSxHQUFHVDtJQUNsQixPQUFPcUMsR0FBRyxPQUFPLENBQUMsY0FBYyxFQUFFNUIsTUFBTSxPQUFPLEVBQUUyQyxHQUFHLENBQUM7QUFDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXNoeS1uZXh0LWRhc2hib2FyZC8uL3NyYy9saWIvc2VydmVyL2tleWNsb2FrLnRzPzg5NGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gS2V5Y2xvYWsgQWRtaW4gUkVTVCBoZWxwZXJzXG4vLyBVc2VzIGFkbWluIHVzZXIgY3JlZGVudGlhbHMgdG8gb2J0YWluIGEgdG9rZW4gYW5kIGNhbGwgYWRtaW4gZW5kcG9pbnRzXG5cbnR5cGUgVG9rZW4gPSB7IGFjY2Vzc190b2tlbjogc3RyaW5nOyBleHBpcmVzX2luOiBudW1iZXIgfTtcblxuZnVuY3Rpb24gcGFyc2VJc3N1ZXIoKSB7XG4gIGNvbnN0IGlzc3VlciA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0lTU1VFUiB8fCBcIlwiOyAvLyBlLmcuLCBodHRwOi8va2V5Y2xvYWs6ODA4MC9yZWFsbXMvbXlyZWFsbVxuICBjb25zdCBtID0gaXNzdWVyLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC9bXi9dKylcXC9yZWFsbXNcXC8oW14vXSspL2kpO1xuICBpZiAoIW0pIHRocm93IG5ldyBFcnJvcihcIktFWUNMT0FLX0lTU1VFUiBpbnbDoWxpZG9cIik7XG4gIHJldHVybiB7IGJhc2U6IG1bMV0sIHJlYWxtOiBtWzJdIH07XG59XG5cbmxldCBjYWNoZWQ6IHsgdG9rZW46IHN0cmluZzsgZXhwOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBZG1pblRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICBpZiAoY2FjaGVkICYmIGNhY2hlZC5leHAgLSAzMCA+IG5vdykgcmV0dXJuIGNhY2hlZC50b2tlbjtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB1c2VybmFtZSA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0FETUlOX1VTRVIgfHwgcHJvY2Vzcy5lbnYuS0VZQ0xPQUtfQURNSU4gfHwgXCJhZG1pblwiO1xuICBjb25zdCBwYXNzd29yZCA9IHByb2Nlc3MuZW52LktFWUNMT0FLX0FETUlOX1BBU1NXT1JEIHx8IFwiYWRtaW5cIjtcbiAgY29uc3QgdXJsID0gYCR7YmFzZX0vcmVhbG1zL21hc3Rlci9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC90b2tlbmA7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBncmFudF90eXBlOiBcInBhc3N3b3JkXCIsXG4gICAgY2xpZW50X2lkOiBcImFkbWluLWNsaVwiLFxuICAgIHVzZXJuYW1lLFxuICAgIHBhc3N3b3JkXG4gIH0pO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiB9LFxuICAgIGJvZHlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIHRva2VuIGVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIGNvbnN0IGpzb24gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgVG9rZW47XG4gIGNhY2hlZCA9IHsgdG9rZW46IGpzb24uYWNjZXNzX3Rva2VuLCBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKGpzb24uZXhwaXJlc19pbiB8fCA2MCkgfTtcbiAgcmV0dXJuIGNhY2hlZC50b2tlbjtcbn1cblxuYXN5bmMgZnVuY3Rpb24ga2M8VCA9IGFueT4obWV0aG9kOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZGF0YT86IGFueSk6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IGJhc2UgfSA9IHBhcnNlSXNzdWVyKCk7XG4gIGNvbnN0IHRva2VuID0gYXdhaXQgZ2V0QWRtaW5Ub2tlbigpO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlfSR7cGF0aH1gLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgLi4uKGRhdGEgPyB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0gOiB7fSlcbiAgICB9LFxuICAgIGJvZHk6IGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IHVuZGVmaW5lZFxuICB9KTtcbiAgaWYgKHJlcy5zdGF0dXMgPT09IDIwNCkgcmV0dXJuIHVuZGVmaW5lZCBhcyBhbnk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIGVycm9yICR7cmVzLnN0YXR1c31gKTtcbiAgY29uc3QgY3QgPSByZXMuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgfHwgXCJcIjtcbiAgaWYgKGN0LmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUO1xuICAvLyBGb3IgY3JlYXRlIGVuZHBvaW50cywgaWQgY2FuIGJlIGluIExvY2F0aW9uIGhlYWRlclxuICByZXR1cm4gdW5kZWZpbmVkIGFzIGFueTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjTGlzdEdyb3VwcygpOiBQcm9taXNlPEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PiB7XG4gIGNvbnN0IHsgcmVhbG0gfSA9IHBhcnNlSXNzdWVyKCk7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHNgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjQ3JlYXRlR3JvdXAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZX0vYWRtaW4vcmVhbG1zLyR7cmVhbG19L2dyb3Vwc2AsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lIH0pXG4gIH0pO1xuICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBLZXljbG9hayBjcmVhdGUgZ3JvdXAgJHtyZXMuc3RhdHVzfWApO1xuICBjb25zdCBsb2MgPSByZXMuaGVhZGVycy5nZXQoXCJsb2NhdGlvblwiKSB8fCBcIlwiO1xuICBjb25zdCBtID0gbG9jLm1hdGNoKC9cXC9ncm91cHNcXC8oW14vXSspJC8pO1xuICByZXR1cm4gbSA/IG1bMV0gOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY1JlbmFtZUdyb3VwKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIlBVVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHMvJHtpZH1gLCB7IG5hbWUgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0RlbGV0ZUdyb3VwKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgYXdhaXQga2MoXCJERUxFVEVcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vZ3JvdXBzLyR7aWR9YCk7XG59XG5cbmV4cG9ydCB0eXBlIEtDVXNlciA9IHsgaWQ6IHN0cmluZzsgdXNlcm5hbWU6IHN0cmluZzsgZW1haWw/OiBzdHJpbmc7IGVuYWJsZWQ6IGJvb2xlYW4gfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjTGlzdFVzZXJzKHNlYXJjaD86IHN0cmluZywgZmlyc3Q/OiBudW1iZXIsIG1heD86IG51bWJlcik6IFByb21pc2U8S0NVc2VyW10+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBpZiAoc2VhcmNoKSBwYXJhbXMuc2V0KFwic2VhcmNoXCIsIHNlYXJjaCk7XG4gIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJmaXJzdFwiLCBTdHJpbmcoZmlyc3QpKTtcbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJtYXhcIiwgU3RyaW5nKG1heCkpO1xuICBjb25zdCBxcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICBjb25zdCBxID0gcXMgPyBgPyR7cXN9YCA6IFwiXCI7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2VycyR7cX1gKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjQ3JlYXRlVXNlcihwYXJhbXM6IHsgdXNlcm5hbWU6IHN0cmluZzsgZW1haWw/OiBzdHJpbmc7IHBhc3N3b3JkPzogc3RyaW5nOyBncm91cHM/OiBzdHJpbmdbXSB9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBncm91cHMgfSA9IHBhcmFtcztcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2V9L2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vyc2AsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZSwgZW1haWwsIGVuYWJsZWQ6IHRydWUgfSlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEtleWNsb2FrIGNyZWF0ZSB1c2VyICR7cmVzLnN0YXR1c31gKTtcbiAgY29uc3QgbG9jID0gcmVzLmhlYWRlcnMuZ2V0KFwibG9jYXRpb25cIikgfHwgXCJcIjtcbiAgY29uc3QgbSA9IGxvYy5tYXRjaCgvXFwvdXNlcnNcXC8oW14vXSspJC8pO1xuICBjb25zdCBpZCA9IG0gPyBtWzFdIDogXCJcIjtcbiAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBvYnRlbmVyIElEIGRlIHVzdWFyaW9cIik7XG4gIGlmIChwYXNzd29yZCkge1xuICAgIGF3YWl0IGZldGNoKGAke2Jhc2V9L2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9yZXNldC1wYXNzd29yZGAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwicGFzc3dvcmRcIiwgdmFsdWU6IHBhc3N3b3JkLCB0ZW1wb3Jhcnk6IGZhbHNlIH0pXG4gICAgfSk7XG4gIH1cbiAgaWYgKGdyb3VwcyAmJiBncm91cHMubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBnaWQgb2YgZ3JvdXBzKSB7XG4gICAgICBhd2FpdCBmZXRjaChgJHtiYXNlfS9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH0vZ3JvdXBzLyR7Z2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0RlbGV0ZVVzZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIkRFTEVURVwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NTZXRVc2VyUGFzc3dvcmQoaWQ6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgdGVtcG9yYXJ5ID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyByZWFsbSB9ID0gcGFyc2VJc3N1ZXIoKTtcbiAgY29uc3QgeyBiYXNlIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFkbWluVG9rZW4oKTtcbiAgYXdhaXQgZmV0Y2goYCR7YmFzZX0vYWRtaW4vcmVhbG1zLyR7cmVhbG19L3VzZXJzLyR7aWR9L3Jlc2V0LXBhc3N3b3JkYCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLCBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJwYXNzd29yZFwiLCB2YWx1ZTogcGFzc3dvcmQsIHRlbXBvcmFyeSB9KVxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGtjVXNlckdyb3VwcyhpZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9Pj4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICByZXR1cm4ga2MoXCJHRVRcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH0vZ3JvdXBzYCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrY0FkZFVzZXJUb0dyb3VwKGlkOiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIlBVVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9ncm91cHMvJHtncm91cElkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NSZW1vdmVVc2VyRnJvbUdyb3VwKGlkOiBzdHJpbmcsIGdyb3VwSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBhd2FpdCBrYyhcIkRFTEVURVwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS91c2Vycy8ke2lkfS9ncm91cHMvJHtncm91cElkfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NVc2Vyc0NvdW50KHNlYXJjaD86IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHsgcmVhbG0gfSA9IHBhcnNlSXNzdWVyKCk7XG4gIGNvbnN0IHEgPSBzZWFyY2ggPyBgP3NlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2gpfWAgOiBcIlwiO1xuICBjb25zdCBkYXRhID0gYXdhaXQga2M8eyBjb3VudDogbnVtYmVyIH0+KFwiR0VUXCIsIGAvYWRtaW4vcmVhbG1zLyR7cmVhbG19L3VzZXJzL2NvdW50JHtxfWApO1xuICAvLyBLZXljbG9hayByZXR1cm5zIGEgbnVtYmVyIGRpcmVjdGx5IGluIHNvbWUgdmVyc2lvbnNcbiAgaWYgKHR5cGVvZiAoZGF0YSBhcyBhbnkpID09PSBcIm51bWJlclwiKSByZXR1cm4gZGF0YSBhcyBhbnk7XG4gIHJldHVybiAoZGF0YSBhcyBhbnkpPy5jb3VudCA/PyAwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NHcm91cE1lbWJlcnMoZ3JvdXBJZDogc3RyaW5nLCBmaXJzdD86IG51bWJlciwgbWF4PzogbnVtYmVyKTogUHJvbWlzZTxLQ1VzZXJbXT4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJmaXJzdFwiLCBTdHJpbmcoZmlyc3QpKTtcbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIpIHBhcmFtcy5zZXQoXCJtYXhcIiwgU3RyaW5nKG1heCkpO1xuICBjb25zdCBxID0gcGFyYW1zLnRvU3RyaW5nKCkgPyBgPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCA6IFwiXCI7XG4gIHJldHVybiBrYyhcIkdFVFwiLCBgL2FkbWluL3JlYWxtcy8ke3JlYWxtfS9ncm91cHMvJHtncm91cElkfS9tZW1iZXJzJHtxfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2NHZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB7IHJlYWxtIH0gPSBwYXJzZUlzc3VlcigpO1xuICByZXR1cm4ga2MoXCJHRVRcIiwgYC9hZG1pbi9yZWFsbXMvJHtyZWFsbX0vdXNlcnMvJHtpZH1gKTtcbn1cbiJdLCJuYW1lcyI6WyJwYXJzZUlzc3VlciIsImlzc3VlciIsInByb2Nlc3MiLCJlbnYiLCJLRVlDTE9BS19JU1NVRVIiLCJtIiwibWF0Y2giLCJFcnJvciIsImJhc2UiLCJyZWFsbSIsImNhY2hlZCIsImdldEFkbWluVG9rZW4iLCJub3ciLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwiZXhwIiwidG9rZW4iLCJ1c2VybmFtZSIsIktFWUNMT0FLX0FETUlOX1VTRVIiLCJLRVlDTE9BS19BRE1JTiIsInBhc3N3b3JkIiwiS0VZQ0xPQUtfQURNSU5fUEFTU1dPUkQiLCJ1cmwiLCJib2R5IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ3JhbnRfdHlwZSIsImNsaWVudF9pZCIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwianNvbiIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJrYyIsInBhdGgiLCJkYXRhIiwiQXV0aG9yaXphdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJjdCIsImdldCIsImluY2x1ZGVzIiwia2NMaXN0R3JvdXBzIiwia2NDcmVhdGVHcm91cCIsIm5hbWUiLCJsb2MiLCJrY1JlbmFtZUdyb3VwIiwiaWQiLCJrY0RlbGV0ZUdyb3VwIiwia2NMaXN0VXNlcnMiLCJzZWFyY2giLCJmaXJzdCIsIm1heCIsInBhcmFtcyIsInNldCIsIlN0cmluZyIsInFzIiwidG9TdHJpbmciLCJxIiwia2NDcmVhdGVVc2VyIiwiZW1haWwiLCJncm91cHMiLCJlbmFibGVkIiwidHlwZSIsInZhbHVlIiwidGVtcG9yYXJ5IiwibGVuZ3RoIiwiZ2lkIiwia2NEZWxldGVVc2VyIiwia2NTZXRVc2VyUGFzc3dvcmQiLCJrY1VzZXJHcm91cHMiLCJrY0FkZFVzZXJUb0dyb3VwIiwiZ3JvdXBJZCIsImtjUmVtb3ZlVXNlckZyb21Hcm91cCIsImtjVXNlcnNDb3VudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvdW50Iiwia2NHcm91cE1lbWJlcnMiLCJrY0dldFVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/keycloak.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server/persist.ts":
/*!***********************************!*\
  !*** ./src/lib/server/persist.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteState: () => (/* binding */ deleteState),\n/* harmony export */   getState: () => (/* binding */ getState),\n/* harmony export */   listKeys: () => (/* binding */ listKeys),\n/* harmony export */   putState: () => (/* binding */ putState)\n/* harmony export */ });\n// Server-side persistence helpers for SQLite or PostgreSQL\n// Driver selected via env PERSIST_DRIVER = 'postgres' | 'sqlite'\nconst DRIVER = (process.env.PERSIST_DRIVER || \"\").toLowerCase();\nlet DISABLED = false;\nlet initOnce = null;\nasync function ensurePg() {\n    const { Pool } = requireOptional(\"pg\");\n    const url = process.env.DATABASE_URL;\n    if (!url) throw new Error(\"DATABASE_URL requerido para postgres\");\n    // reuse across hot reloads\n    // @ts-ignore\n    global.__pgPool = global.__pgPool || new Pool({\n        connectionString: url\n    });\n    // @ts-ignore\n    const pool = global.__pgPool;\n    await pool.query(`CREATE TABLE IF NOT EXISTS dashboard_state (\n      key TEXT PRIMARY KEY,\n      content JSONB NOT NULL,\n      updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\n    )`);\n}\nfunction getPgPool() {\n    // @ts-ignore\n    return global.__pgPool;\n}\nasync function ensureSqlite() {\n    const Database = requireOptional(\"better-sqlite3\");\n    const file = process.env.SQLITE_FILE || \"./data.sqlite\";\n    // @ts-ignore\n    global.__sqlite = global.__sqlite || new Database(file);\n    // @ts-ignore\n    const db = global.__sqlite;\n    db.pragma(\"journal_mode = WAL\");\n    db.prepare(`CREATE TABLE IF NOT EXISTS dashboard_state (\n      key TEXT PRIMARY KEY,\n      content TEXT NOT NULL,\n      updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n    )`).run();\n}\nfunction getSqliteDb() {\n    // @ts-ignore\n    return global.__sqlite;\n}\nfunction requireOptional(mod) {\n    try {\n        // Use static requires to avoid webpack dynamic require warnings\n        if (mod === \"pg\") {\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\n            return __webpack_require__(/*! pg */ \"pg\");\n        }\n        if (mod === \"better-sqlite3\") {\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\n            return __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n        }\n        // Unknown module requested  not supported in this codebase\n        throw new Error(`Mdulo no soportado: ${mod}`);\n    } catch (e) {\n        const driver = DRIVER || \"\";\n        throw new Error(`Dependencia faltante '${mod}'. Instala el paquete para usar '${driver}'.`);\n    }\n}\nasync function ensureInited() {\n    if (initOnce) return initOnce;\n    initOnce = (async ()=>{\n        try {\n            if (DRIVER === \"postgres\") await ensurePg();\n            else if (DRIVER === \"sqlite\") await ensureSqlite();\n            else if (!DRIVER) {\n                // remote persistence deshabilitado\n                DISABLED = true;\n                return;\n            } else {\n                // driver invlido\n                DISABLED = true;\n                return;\n            }\n        } catch (e) {\n            // Si faltan dependencias o conexiones fallan, degradar sin romper la app\n            DISABLED = true;\n            // eslint-disable-next-line no-console\n            console.warn(`[persist] deshabilitado: ${e?.message || e}`);\n        }\n    })();\n    return initOnce;\n}\nasync function getState(key) {\n    await ensureInited();\n    if (DISABLED) return null;\n    if (DRIVER === \"postgres\") {\n        const pool = getPgPool();\n        const { rows } = await pool.query(\"SELECT content FROM dashboard_state WHERE key = $1\", [\n            key\n        ]);\n        if (!rows.length) return null;\n        return rows[0].content;\n    }\n    if (DRIVER === \"sqlite\") {\n        const db = getSqliteDb();\n        const row = db.prepare(\"SELECT content FROM dashboard_state WHERE key = ?\").get(key);\n        if (!row) return null;\n        try {\n            return JSON.parse(row.content);\n        } catch  {\n            return null;\n        }\n    }\n    return null;\n}\nasync function putState(key, content) {\n    await ensureInited();\n    if (DISABLED) return; // no-op si est deshabilitado\n    if (DRIVER === \"postgres\") {\n        const pool = getPgPool();\n        await pool.query(`INSERT INTO dashboard_state (key, content) VALUES ($1, $2::jsonb)\n       ON CONFLICT (key) DO UPDATE SET content = EXCLUDED.content, updated_at = now()`, [\n            key,\n            JSON.stringify(content)\n        ]);\n        return;\n    }\n    if (DRIVER === \"sqlite\") {\n        const db = getSqliteDb();\n        const json = JSON.stringify(content);\n        db.prepare(`INSERT INTO dashboard_state (key, content, updated_at) VALUES (?, ?, datetime('now'))\n       ON CONFLICT(key) DO UPDATE SET content = excluded.content, updated_at = excluded.updated_at`).run(key, json);\n        return;\n    }\n}\nasync function listKeys() {\n    await ensureInited();\n    if (DRIVER === \"postgres\") {\n        const pool = getPgPool();\n        const { rows } = await pool.query(`SELECT key, to_char(updated_at, 'YYYY-MM-DD\"T\"HH24:MI:SSZ') as updated_at FROM dashboard_state ORDER BY updated_at DESC`);\n        return rows;\n    }\n    if (DRIVER === \"sqlite\") {\n        const db = getSqliteDb();\n        const rows = db.prepare(\"SELECT key, updated_at FROM dashboard_state ORDER BY updated_at DESC\").all();\n        return rows;\n    }\n    return [];\n}\nasync function deleteState(key) {\n    await ensureInited();\n    if (DRIVER === \"postgres\") {\n        const pool = getPgPool();\n        await pool.query(\"DELETE FROM dashboard_state WHERE key = $1\", [\n            key\n        ]);\n        return;\n    }\n    if (DRIVER === \"sqlite\") {\n        const db = getSqliteDb();\n        db.prepare(\"DELETE FROM dashboard_state WHERE key = ?\").run(key);\n        return;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsd0VBQXdFd0IsR0FBRztRQUNuRyxPQUFPWDtJQUNUO0lBQ0EsT0FBTyxFQUFFO0FBQ1g7QUFFTyxlQUFlWSxZQUFZYixHQUFXO0lBQzNDLE1BQU1MO0lBQ04sSUFBSWpDLFdBQVcsWUFBWTtRQUN6QixNQUFNZ0IsT0FBT0U7UUFDYixNQUFNRixLQUFLQyxLQUFLLENBQUMsOENBQThDO1lBQUNxQjtTQUFJO1FBQ3BFO0lBQ0Y7SUFDQSxJQUFJdEMsV0FBVyxVQUFVO1FBQ3ZCLE1BQU13QixLQUFLSTtRQUNYSixHQUFHRSxPQUFPLENBQUMsNkNBQTZDQyxHQUFHLENBQUNXO1FBQzVEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2h5LW5leHQtZGFzaGJvYXJkLy4vc3JjL2xpYi9zZXJ2ZXIvcGVyc2lzdC50cz82MGY2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlcnZlci1zaWRlIHBlcnNpc3RlbmNlIGhlbHBlcnMgZm9yIFNRTGl0ZSBvciBQb3N0Z3JlU1FMXG4vLyBEcml2ZXIgc2VsZWN0ZWQgdmlhIGVudiBQRVJTSVNUX0RSSVZFUiA9ICdwb3N0Z3JlcycgfCAnc3FsaXRlJ1xuXG50eXBlIEpzb25WYWx1ZSA9IGFueTtcblxuY29uc3QgRFJJVkVSID0gKHByb2Nlc3MuZW52LlBFUlNJU1RfRFJJVkVSIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG5sZXQgRElTQUJMRUQgPSBmYWxzZTtcblxubGV0IGluaXRPbmNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZVBnKCkge1xuICBjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmVPcHRpb25hbChcInBnXCIpO1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkw7XG4gIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJEQVRBQkFTRV9VUkwgcmVxdWVyaWRvIHBhcmEgcG9zdGdyZXNcIik7XG4gIC8vIHJldXNlIGFjcm9zcyBob3QgcmVsb2Fkc1xuICAvLyBAdHMtaWdub3JlXG4gIGdsb2JhbC5fX3BnUG9vbCA9IGdsb2JhbC5fX3BnUG9vbCB8fCBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmc6IHVybCB9KTtcbiAgLy8gQHRzLWlnbm9yZVxuICBjb25zdCBwb29sID0gZ2xvYmFsLl9fcGdQb29sIGFzIGltcG9ydChcInBnXCIpLlBvb2w7XG4gIGF3YWl0IHBvb2wucXVlcnkoXG4gICAgYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGRhc2hib2FyZF9zdGF0ZSAoXG4gICAgICBrZXkgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgIGNvbnRlbnQgSlNPTkIgTk9UIE5VTEwsXG4gICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMIERFRkFVTFQgbm93KClcbiAgICApYFxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRQZ1Bvb2woKSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIGdsb2JhbC5fX3BnUG9vbCBhcyBpbXBvcnQoXCJwZ1wiKS5Qb29sO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVTcWxpdGUoKSB7XG4gIGNvbnN0IERhdGFiYXNlID0gcmVxdWlyZU9wdGlvbmFsKFwiYmV0dGVyLXNxbGl0ZTNcIik7XG4gIGNvbnN0IGZpbGUgPSBwcm9jZXNzLmVudi5TUUxJVEVfRklMRSB8fCBcIi4vZGF0YS5zcWxpdGVcIjtcbiAgLy8gQHRzLWlnbm9yZVxuICBnbG9iYWwuX19zcWxpdGUgPSBnbG9iYWwuX19zcWxpdGUgfHwgbmV3IERhdGFiYXNlKGZpbGUpO1xuICAvLyBAdHMtaWdub3JlXG4gIGNvbnN0IGRiID0gZ2xvYmFsLl9fc3FsaXRlIGFzIGFueTtcbiAgZGIucHJhZ21hKFwiam91cm5hbF9tb2RlID0gV0FMXCIpO1xuICBkYi5wcmVwYXJlKFxuICAgIGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBkYXNoYm9hcmRfc3RhdGUgKFxuICAgICAga2V5IFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICBjb250ZW50IFRFWFQgTk9UIE5VTEwsXG4gICAgICB1cGRhdGVkX2F0IFRFWFQgTk9UIE5VTEwgREVGQVVMVCAoZGF0ZXRpbWUoJ25vdycpKVxuICAgIClgXG4gICkucnVuKCk7XG59XG5cbmZ1bmN0aW9uIGdldFNxbGl0ZURiKCkge1xuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBnbG9iYWwuX19zcWxpdGUgYXMgYW55O1xufVxuXG5mdW5jdGlvbiByZXF1aXJlT3B0aW9uYWwobW9kOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBVc2Ugc3RhdGljIHJlcXVpcmVzIHRvIGF2b2lkIHdlYnBhY2sgZHluYW1pYyByZXF1aXJlIHdhcm5pbmdzXG4gICAgaWYgKG1vZCA9PT0gXCJwZ1wiKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuICAgICAgcmV0dXJuIHJlcXVpcmUoXCJwZ1wiKTtcbiAgICB9XG4gICAgaWYgKG1vZCA9PT0gXCJiZXR0ZXItc3FsaXRlM1wiKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuICAgICAgcmV0dXJuIHJlcXVpcmUoXCJiZXR0ZXItc3FsaXRlM1wiKTtcbiAgICB9XG4gICAgLy8gVW5rbm93biBtb2R1bGUgcmVxdWVzdGVkIOKAlCBub3Qgc3VwcG9ydGVkIGluIHRoaXMgY29kZWJhc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE3Ds2R1bG8gbm8gc29wb3J0YWRvOiAke21vZH1gKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnN0IGRyaXZlciA9IERSSVZFUiB8fCBcIlwiO1xuICAgIHRocm93IG5ldyBFcnJvcihgRGVwZW5kZW5jaWEgZmFsdGFudGUgJyR7bW9kfScuIEluc3RhbGEgZWwgcGFxdWV0ZSBwYXJhIHVzYXIgJyR7ZHJpdmVyfScuYCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlSW5pdGVkKCkge1xuICBpZiAoaW5pdE9uY2UpIHJldHVybiBpbml0T25jZTtcbiAgaW5pdE9uY2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoRFJJVkVSID09PSBcInBvc3RncmVzXCIpIGF3YWl0IGVuc3VyZVBnKCk7XG4gICAgICBlbHNlIGlmIChEUklWRVIgPT09IFwic3FsaXRlXCIpIGF3YWl0IGVuc3VyZVNxbGl0ZSgpO1xuICAgICAgZWxzZSBpZiAoIURSSVZFUikge1xuICAgICAgICAvLyByZW1vdGUgcGVyc2lzdGVuY2UgZGVzaGFiaWxpdGFkb1xuICAgICAgICBESVNBQkxFRCA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRyaXZlciBpbnbDoWxpZG9cbiAgICAgICAgRElTQUJMRUQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gU2kgZmFsdGFuIGRlcGVuZGVuY2lhcyBvIGNvbmV4aW9uZXMgZmFsbGFuLCBkZWdyYWRhciBzaW4gcm9tcGVyIGxhIGFwcFxuICAgICAgRElTQUJMRUQgPSB0cnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihgW3BlcnNpc3RdIGRlc2hhYmlsaXRhZG86ICR7KGUgYXMgYW55KT8ubWVzc2FnZSB8fCBlfWApO1xuICAgIH1cbiAgfSkoKTtcbiAgcmV0dXJuIGluaXRPbmNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPEpzb25WYWx1ZSB8IG51bGw+IHtcbiAgYXdhaXQgZW5zdXJlSW5pdGVkKCk7XG4gIGlmIChESVNBQkxFRCkgcmV0dXJuIG51bGw7XG4gIGlmIChEUklWRVIgPT09IFwicG9zdGdyZXNcIikge1xuICAgIGNvbnN0IHBvb2wgPSBnZXRQZ1Bvb2woKTtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkoXCJTRUxFQ1QgY29udGVudCBGUk9NIGRhc2hib2FyZF9zdGF0ZSBXSEVSRSBrZXkgPSAkMVwiLCBba2V5XSk7XG4gICAgaWYgKCFyb3dzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHJvd3NbMF0uY29udGVudDtcbiAgfVxuICBpZiAoRFJJVkVSID09PSBcInNxbGl0ZVwiKSB7XG4gICAgY29uc3QgZGIgPSBnZXRTcWxpdGVEYigpO1xuICAgIGNvbnN0IHJvdyA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgY29udGVudCBGUk9NIGRhc2hib2FyZF9zdGF0ZSBXSEVSRSBrZXkgPSA/XCIpLmdldChrZXkpO1xuICAgIGlmICghcm93KSByZXR1cm4gbnVsbDtcbiAgICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZShyb3cuY29udGVudCk7IH0gY2F0Y2ggeyByZXR1cm4gbnVsbDsgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHV0U3RhdGUoa2V5OiBzdHJpbmcsIGNvbnRlbnQ6IEpzb25WYWx1ZSk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBlbnN1cmVJbml0ZWQoKTtcbiAgaWYgKERJU0FCTEVEKSByZXR1cm47IC8vIG5vLW9wIHNpIGVzdMOhIGRlc2hhYmlsaXRhZG9cbiAgaWYgKERSSVZFUiA9PT0gXCJwb3N0Z3Jlc1wiKSB7XG4gICAgY29uc3QgcG9vbCA9IGdldFBnUG9vbCgpO1xuICAgIGF3YWl0IHBvb2wucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gZGFzaGJvYXJkX3N0YXRlIChrZXksIGNvbnRlbnQpIFZBTFVFUyAoJDEsICQyOjpqc29uYilcbiAgICAgICBPTiBDT05GTElDVCAoa2V5KSBETyBVUERBVEUgU0VUIGNvbnRlbnQgPSBFWENMVURFRC5jb250ZW50LCB1cGRhdGVkX2F0ID0gbm93KClgLFxuICAgICAgW2tleSwgSlNPTi5zdHJpbmdpZnkoY29udGVudCldXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKERSSVZFUiA9PT0gXCJzcWxpdGVcIikge1xuICAgIGNvbnN0IGRiID0gZ2V0U3FsaXRlRGIoKTtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoY29udGVudCk7XG4gICAgZGIucHJlcGFyZShcbiAgICAgIGBJTlNFUlQgSU5UTyBkYXNoYm9hcmRfc3RhdGUgKGtleSwgY29udGVudCwgdXBkYXRlZF9hdCkgVkFMVUVTICg/LCA/LCBkYXRldGltZSgnbm93JykpXG4gICAgICAgT04gQ09ORkxJQ1Qoa2V5KSBETyBVUERBVEUgU0VUIGNvbnRlbnQgPSBleGNsdWRlZC5jb250ZW50LCB1cGRhdGVkX2F0ID0gZXhjbHVkZWQudXBkYXRlZF9hdGBcbiAgICApLnJ1bihrZXksIGpzb24pO1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdEtleXMoKTogUHJvbWlzZTx7IGtleTogc3RyaW5nOyB1cGRhdGVkX2F0OiBzdHJpbmcgfVtdPiB7XG4gIGF3YWl0IGVuc3VyZUluaXRlZCgpO1xuICBpZiAoRFJJVkVSID09PSBcInBvc3RncmVzXCIpIHtcbiAgICBjb25zdCBwb29sID0gZ2V0UGdQb29sKCk7XG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBwb29sLnF1ZXJ5KGBTRUxFQ1Qga2V5LCB0b19jaGFyKHVwZGF0ZWRfYXQsICdZWVlZLU1NLUREXCJUXCJISDI0Ok1JOlNTWicpIGFzIHVwZGF0ZWRfYXQgRlJPTSBkYXNoYm9hcmRfc3RhdGUgT1JERVIgQlkgdXBkYXRlZF9hdCBERVNDYCk7XG4gICAgcmV0dXJuIHJvd3MgYXMgYW55O1xuICB9XG4gIGlmIChEUklWRVIgPT09IFwic3FsaXRlXCIpIHtcbiAgICBjb25zdCBkYiA9IGdldFNxbGl0ZURiKCk7XG4gICAgY29uc3Qgcm93cyA9IGRiLnByZXBhcmUoXCJTRUxFQ1Qga2V5LCB1cGRhdGVkX2F0IEZST00gZGFzaGJvYXJkX3N0YXRlIE9SREVSIEJZIHVwZGF0ZWRfYXQgREVTQ1wiKS5hbGwoKTtcbiAgICByZXR1cm4gcm93cyBhcyBhbnk7XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU3RhdGUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgZW5zdXJlSW5pdGVkKCk7XG4gIGlmIChEUklWRVIgPT09IFwicG9zdGdyZXNcIikge1xuICAgIGNvbnN0IHBvb2wgPSBnZXRQZ1Bvb2woKTtcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFwiREVMRVRFIEZST00gZGFzaGJvYXJkX3N0YXRlIFdIRVJFIGtleSA9ICQxXCIsIFtrZXldKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKERSSVZFUiA9PT0gXCJzcWxpdGVcIikge1xuICAgIGNvbnN0IGRiID0gZ2V0U3FsaXRlRGIoKTtcbiAgICBkYi5wcmVwYXJlKFwiREVMRVRFIEZST00gZGFzaGJvYXJkX3N0YXRlIFdIRVJFIGtleSA9ID9cIikucnVuKGtleSk7XG4gICAgcmV0dXJuO1xuICB9XG59XG4iXSwibmFtZXMiOlsiRFJJVkVSIiwicHJvY2VzcyIsImVudiIsIlBFUlNJU1RfRFJJVkVSIiwidG9Mb3dlckNhc2UiLCJESVNBQkxFRCIsImluaXRPbmNlIiwiZW5zdXJlUGciLCJQb29sIiwicmVxdWlyZU9wdGlvbmFsIiwidXJsIiwiREFUQUJBU0VfVVJMIiwiRXJyb3IiLCJnbG9iYWwiLCJfX3BnUG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwb29sIiwicXVlcnkiLCJnZXRQZ1Bvb2wiLCJlbnN1cmVTcWxpdGUiLCJEYXRhYmFzZSIsImZpbGUiLCJTUUxJVEVfRklMRSIsIl9fc3FsaXRlIiwiZGIiLCJwcmFnbWEiLCJwcmVwYXJlIiwicnVuIiwiZ2V0U3FsaXRlRGIiLCJtb2QiLCJyZXF1aXJlIiwiZSIsImRyaXZlciIsImVuc3VyZUluaXRlZCIsImNvbnNvbGUiLCJ3YXJuIiwibWVzc2FnZSIsImdldFN0YXRlIiwia2V5Iiwicm93cyIsImxlbmd0aCIsImNvbnRlbnQiLCJyb3ciLCJnZXQiLCJKU09OIiwicGFyc2UiLCJwdXRTdGF0ZSIsInN0cmluZ2lmeSIsImpzb24iLCJsaXN0S2V5cyIsImFsbCIsImRlbGV0ZVN0YXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/persist.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash","vendor-chunks/jwt-decode"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fkeys%2Froute&page=%2Fapi%2Fadmin%2Fkeys%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fkeys%2Froute.ts&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();